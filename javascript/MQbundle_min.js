(function(){function k(){}function f(e){var m=da.call(arguments,1);return function(){return e.apply(this,m)}}function u(e,m){if(!m)throw Error("prayer failed: "+e);}function A(e){u("a direction was passed",-1===e||1===e)}function M(e,m,b,c){function h(){B=ba;var C=g.selection?"$"+g.selection.latex()+"$":"";Q.select(C)}var n=e.contents().detach();b||e.addClass("mathquill-rendered-math");m.jQ=e.attr("mathquill-block-id",m.id);m.revert=function(){e.empty().unbind(".mathquill").removeClass("mathquill-rendered-math mathquill-editable mathquill-textbox").append(n)};
var g=m.cursor=va(m);m.renderLatex(n.text());if(navigator.userAgent.match("Android"))var t=m.textarea=G('<span class="textarea"><input type="password"/></span>'),v=t.children();else t=m.textarea=G('<span class="textarea"><textarea></textarea></span>'),v=t.children();var B;m.selectionChanged=function(){B===ba&&(B=setTimeout(h));ka(e[0])};e.bind("selectstart.mathquill",function(C){C.target!==v[0]&&C.preventDefault();C.stopPropagation()});var E,J=g.blink;e.bind("mousedown.mathquill",function(C){function X(L){g.seek(G(L.target),
L.pageX,L.pageY);g[-1]===E[-1]&&g.parent===E.parent||g.selectFrom(E);return!1}function W(L){delete L.target;return X(L)}function Y(L){E=ba;g.blink=J;g.selection||(c?g.show():t.detach());e.unbind("mousemove",X);G(L.target.ownerDocument).unbind("mousemove",W).unbind("mouseup",Y)}setTimeout(function(){document.activeElement!=v[0]&&v.focus()});g.blink=k;g.seek(G(C.target),C.pageX,C.pageY);E=l(g.parent,g[-1],g[1]);c||e.prepend(t);e.mousemove(X);G(C.target.ownerDocument).mousemove(W).mouseup(Y);return!1});
if(c)Q=Z(v,{container:e,key:function(C,X){g.parent.bubble("onKey",C,X)},text:function(C){g.parent.bubble("onText",C)},cut:function(C){g.selection&&setTimeout(function(){g.prepareEdit();g.parent.bubble("redraw")});C.stopPropagation()},paste:function(C){C="$"===C.slice(0,1)&&"$"===C.slice(-1)?C.slice(1,-1):"\\text{"+C+"}";g.writeLatex(C).show()}}),e.prepend(t),e.addClass("mathquill-editable"),b&&e.addClass("mathquill-textbox"),v.focus(function(C){g.parent||g.insAtRightEnd(m);g.parent.jQ.addClass("hasCursor");
g.selection?(g.selection.jQ.removeClass("blur"),setTimeout(m.selectionChanged)):g.show();C.stopPropagation()}).blur(function(C){g.hide().parent.blur();g.selection&&g.selection.jQ.addClass("blur");C.stopPropagation()}),e.bind("focus.mathquill blur.mathquill",function(C){v.trigger(C)}).bind("click.mathquill",function(C){document.activeElement!=v[0]&&v.focus()}).blur();else{var O=function(){t.detach()},Q=Z(v,{container:e});e.bind("cut paste",!1).bind("copy",h).prepend('<span class="selectable">$'+m.latex()+
"$</span>");v.blur(function(){g.clearSelection();setTimeout(O)})}}function V(e,m,b){return z(oa,{ctrlSeq:e,htmlTemplate:"<"+m+" "+b+">&0</"+m+">"})}var R=window.jQuery,ba,ea=Math.min,da=[].slice,S=navigator.userAgent.match("Android"),z=function(e,m,b){function c(g){return"function"===typeof g}function h(){}function n(g,t){function v(){var Q=new B;c(Q.init)&&Q.init.apply(Q,arguments);return Q}function B(){}t===b&&(t=g,g=Object);v.Bare=B;var E=h[e]=g[e],J=B[e]=v[e]=new h,O;J.constructor=v;v.mixin=function(Q){B[e]=
v[e]=n(v,Q)[e];return v};return(v.open=function(Q){O={};c(Q)?O=Q.call(v,J,E,v,g):"object"===typeof Q&&(O=Q);if("object"===typeof O)for(var C in O)m.call(O,C)&&(J[C]=O[C]);c(J.init)||(J.init=g);return v})(t)}return n}("prototype",{}.hasOwnProperty),Z=function(){function e(b){var c=b.which||b.keyCode,h=m[c],n=[];b.ctrlKey&&n.push("Ctrl");b.originalEvent&&b.originalEvent.metaKey&&n.push("Meta");b.altKey&&n.push("Alt");b.shiftKey&&n.push("Shift");b=h||String.fromCharCode(c);if(!n.length&&!h)return b;
n.push(b);return n.join("-")}var m={8:"Backspace",9:"Tab",10:"Enter",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Esc",32:"Spacebar",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",45:"Insert",46:"Del",144:"NumLock"};return function(b,c){function h(L){var fa=R.trim(C.val());C.val(" ");fa&&L(fa)}function n(L){v&&(B||S)&&J(e(v),v);B=L;W=L=g;clearTimeout(Y);Y=setTimeout(L)}function g(){var L=C[0];("selectionStart"in L?L.selectionStart!==L.selectionEnd:
document.selection&&"Text"===document.selection.type&&document.selection.createRange&&document.selection.createRange().parentElement()===C[0])||h(E)}function t(){h(O)}var v=null,B=null;c||(c={});var E=c.text||k,J=c.key||k,O=c.paste||k,Q=c.cut||k,C=R(b),X=R(c.container||C),W=k,Y;X.bind("keydown keypress input keyup focusout paste",function(){W()});X.bind({keydown:function(L){v=L;B=null;S?n():J(e(v),v)},keypress:n,focusout:function(){v=B=null},cut:Q,paste:function(L){C.focus();W=t;clearTimeout(Y);Y=
setTimeout(t)}});return{select:function(L){W();W=k;clearTimeout(Y);C.val(L);L&&C[0].select()}}}}(),N=z(function(e,m,b){function c(g,t){throw"Parse Error: "+t+" at "+(g?"'"+g+"'":"EOF");}e.init=function(g){this._=g};e.parse=function(g){return this.skip(n)._(g,function(t,v){return v},c)};e.or=function(g){u("or is passed a parser",g instanceof b);var t=this;return b(function(v,B,E){return t._(v,B,function(J){return g._(v,B,E)})})};e.then=function(g){var t=this;return b(function(v,B,E){return t._(v,function(J,
O){var Q=g instanceof b?g:g(O);u("a parser is returned",Q instanceof b);return Q._(J,B,E)},E)})};e.many=function(){var g=this;return b(function(t,v,B){function E(Q,C){t=Q;O.push(C);return!0}function J(){return!1}for(var O=[];g._(t,E,J););return v(t,O)})};e.times=function(g,t){2>arguments.length&&(t=g);var v=this;return b(function(B,E,J){function O(fa,pa){X.push(pa);B=fa;return!0}function Q(fa,pa){Y=pa;B=fa;return!1}function C(fa,pa){return!1}for(var X=[],W=!0,Y,L=0;L<g;L+=1)if(W=v._(B,O,Q),!W)return J(B,
Y);for(;L<t&&W;L+=1)W=v._(B,O,C);return E(B,X)})};e.result=function(g){return this.then(h(g))};e.atMost=function(g){return this.times(0,g)};e.atLeast=function(g){var t=this;return t.times(g).then(function(v){return t.many().map(function(B){return v.concat(B)})})};e.map=function(g){return this.then(function(t){return h(g(t))})};e.skip=function(g){return this.then(function(t){return g.result(t)})};this.string=function(g){var t=g.length,v="expected '"+g+"'";return b(function(B,E,J){var O=B.slice(0,t);
return O===g?E(B.slice(t),O):J(B,v)})};e=this.regex=function(g){u("regexp parser is anchored","^"===g.toString().charAt(1));var t="expected "+g;return b(function(v,B,E){var J=g.exec(v);return J?(E=J[0],B(v.slice(E.length),E)):E(v,t)})};var h=b.succeed=function(g){return b(function(t,v){return v(t,g)})};b.fail=function(g){return b(function(t,v,B){return B(t,g)})};b.letter=e(/^[a-z]/i);b.letters=e(/^[a-z]*/i);b.digit=e(/^[0-9]/);b.digits=e(/^[0-9]*/);b.whitespace=e(/^\s+/);b.optWhitespace=e(/^\s*/);
b.any=b(function(g,t,v){return g?t(g.slice(1),g.charAt(0)):v(g,"expected any character")});b.all=b(function(g,t,v){return t("",g)});var n=b.eof=b(function(g,t,v){return g?v(g,"expected EOF"):t(g,g)})}),G=z(R,function(e){e.insDirOf=function(m,b){return-1===m?this.insertBefore(b.first()):this.insertAfter(b.last())};e.insAtDirEnd=function(m,b){return-1===m?this.prependTo(b):this.appendTo(b)}}),l=z(function(e){e.parent=0;e[-1]=0;e[1]=0;e.init=function(m,b,c){this.parent=m;this[-1]=b;this[1]=c}}),r=z(function(e){e[-1]=
0;e[1]=0;e.parent=0;e.init=function(){this.ends={};this.ends[-1]=0;this.ends[1]=0};e.children=function(){return q(this.ends[-1],this.ends[1])};e.eachChild=function(m){return this.children().each(m)};e.foldChildren=function(m,b){return this.children().fold(m,b)};e.adopt=function(m,b,c){q(this,this).adopt(m,b,c);return this};e.disown=function(){q(this,this).disown();return this}}),q=z(function(e){function m(b,c,h){u("a parent is always present",b);var n=c?c[1]===h&&c.parent===b:b.ends[-1]===h;u("leftward is properly set up",
n);b=h?h[-1]===c&&h.parent===b:b.ends[1]===c;u("rightward is properly set up",b)}e.init=function(b,c){u("no half-empty fragments",!b===!c);this.ends={};b&&(u("left end node is passed to Fragment",b instanceof r),u("right end node is passed to Fragment",c instanceof r),u("leftEnd and rightEnd have the same parent",b.parent===c.parent),this.ends[-1]=b,this.ends[1]=c)};e.adopt=function(b,c,h){m(b,c,h);this.disowned=!1;var n=this.ends[-1];if(!n)return this;var g=this.ends[1];c||(b.ends[-1]=n);h?h[-1]=
g:b.ends[1]=g;this.ends[1][1]=h;this.each(function(t){t[-1]=c;t.parent=b;c&&(c[1]=t);c=t});return this};e.disown=function(){var b=this.ends[-1];if(!b||this.disowned)return this;this.disowned=!0;var c=this.ends[1],h=b.parent;m(h,b[-1],b);m(h,c,c[1]);b[-1]?b[-1][1]=c[1]:h.ends[-1]=c[1];c[1]?c[1][-1]=b[-1]:h.ends[1]=b[-1];return this};e.each=function(b){var c=this.ends[-1];if(!c)return this;for(;c!==this.ends[1][1]&&!1!==b.call(this,c);c=c[1]);return this};e.fold=function(b,c){this.each(function(h){b=
c.call(this,b,h)});return b}}),x=function(){var e=0;return function(){return e+=1}}(),y=z(r,function(e,m){e.init=function(b){m.init.call(this);this.id=x();y[this.id]=this};e.toString=function(){return"[MathElement "+this.id+"]"};e.bubble=function(b){for(var c=da.call(arguments,1),h=this;h&&!1!==(h[b]&&h[b].apply(h,c));h=h.parent);return this};e.postOrder=function(b){var c=da.call(arguments,1);if("string"===typeof b){var h=b;b=function(n){h in n&&n[h].apply(n,c)}}(function t(g){g.eachChild(t);b(g)})(this)};
e.jQ=G();e.jQadd=function(b){this.jQ=this.jQ.add(b)};this.jQize=function(b){b=G(b);b.find("*").andSelf().each(function(){var c=G(this),h=c.attr("mathquill-command-id"),n=c.attr("mathquill-block-id");h&&y[h].jQadd(c);n&&y[n].jQadd(c)});return b};e.finalizeInsert=function(){this.postOrder("finalizeTree");this.postOrder("blur");this.postOrder("respace");this[1].respace&&this[1].respace();this[-1].respace&&this[-1].respace();this.postOrder("redraw");this.bubble("redraw")}}),w=z(y,function(e,m){e.init=
function(b,c,h){m.init.call(this);this.ctrlSeq||(this.ctrlSeq=b);c&&(this.htmlTemplate=c);h&&(this.textTemplate=h)};e.replaces=function(b){b.disown();this.replacedFragment=b};e.isEmpty=function(){return this.foldChildren(!0,function(b,c){return b&&c.isEmpty()})};e.parser=function(){var b=this;return ha.block.times(b.numBlocks()).map(function(c){b.blocks=c;for(var h=0;h<c.length;h+=1)c[h].adopt(b,b.ends[1],0);return b})};e.createLeftOf=function(b){var c=this.replacedFragment;this.createBlocks();y.jQize(this.html());
c&&(c.adopt(this.ends[-1],0,0),c.jQ.appendTo(this.ends[-1].jQ));b.jQ.before(this.jQ);b[-1]=this.adopt(b.parent,b[-1],b[1]);this.finalizeInsert(b);this.placeCursor(b)};e.createBlocks=function(){for(var b=this.numBlocks(),c=this.blocks=Array(b),h=0;h<b;h+=1)(c[h]=I()).adopt(this,this.ends[1],0)};e.respace=k;e.placeCursor=function(b){b.insAtRightEnd(this.foldChildren(this.ends[-1],function(c,h){return c.isEmpty()?c:h}))};e.remove=function(){this.disown();this.jQ.remove();this.postOrder(function(b){delete y[b.id]});
return this};e.numBlocks=function(){var b=this.htmlTemplate.match(/&\d+/g);return b?b.length:0};e.html=function(){var b=this.blocks,c=" mathquill-command-id="+this.id,h=this.htmlTemplate.match(/<[^<>]+>|[^<>]+/g);u("no unmatched angle brackets",h.join("")===this.htmlTemplate);for(var n=0,g=h[0];g;n+=1,g=h[n])if("/>"===g.slice(-2))h[n]=g.slice(0,-2)+c+"/>";else if("<"===g.charAt(0)){u("not an unmatched top-level close tag","/"!==g.charAt(1));h[n]=g.slice(0,-1)+c+">";var t=1;do n+=1,g=h[n],u("no missing close tags",
g),"</"===g.slice(0,2)?--t:"<"===g.charAt(0)&&"/>"!==g.slice(-2)&&(t+=1);while(0<t)}return h.join("").replace(/>&(\d+)/g,function(v,B){return" mathquill-block-id="+b[B].id+">"+b[B].join("html")})};e.latex=function(){return this.foldChildren(this.ctrlSeq,function(b,c){return b+"{"+(c.latex()||" ")+"}"})};e.textTemplate=[""];e.text=function(){var b=0;return this.foldChildren(this.textTemplate[b],function(c,h){b+=1;var n=h.text();return c&&"("===this.textTemplate[b]&&"("===n[0]&&")"===n.slice(-1)?c+
n.slice(1,-1)+this.textTemplate[b]:c+h.text()+(this.textTemplate[b]||"")})}}),P=z(w,function(e,m){e.init=function(b,c,h){h||(h=b&&1<b.length?b.slice(1):b);m.init.call(this,b,c,[h])};e.parser=function(){return N.succeed(this)};e.numBlocks=function(){return 0};e.replaces=function(b){b.remove()};e.createBlocks=k;e.latex=function(){return this.ctrlSeq};e.text=function(){return this.textTemplate};e.placeCursor=k;e.isEmpty=function(){return!0}}),I=z(y,function(e){e.join=function(m){return this.foldChildren("",
function(b,c){return b+c[m]()})};e.latex=function(){return this.join("latex")};e.text=function(){return this.ends[-1]===this.ends[1]?this.ends[-1].text():"("+this.join("text")+")"};e.isEmpty=function(){return 0===this.ends[-1]&&0===this.ends[1]};e.write=function(m,b,c){var h=b.match(/^[a-eg-zA-Z]$/)?U(b):(h=K[b]||a[b])?h(b):p(b);c&&h.replaces(c);h.createLeftOf(m)};e.focus=function(){this.jQ.addClass("hasCursor");this.jQ.removeClass("empty");return this};e.blur=function(){this.jQ.removeClass("hasCursor");
this.isEmpty()&&this.jQ.addClass("empty");return this}}),ca=z(q,function(e,m){e.init=function(b,c){m.init.call(this,b,c||b);this.jQ=this.fold(G(),function(h,n){return n.jQ.add(h)})};e.latex=function(){return this.fold("",function(b,c){return b+c.latex()})};e.remove=function(){this.jQ.remove();this.each(function(b){b.postOrder(function(c){delete y[c.id]})});return this.disown()}}),H=z(I,function(e,m){e.latex=function(){return m.latex.call(this).replace(/(\\[a-z]+) (?![a-z])/ig,"$1")};e.text=function(){return this.foldChildren("",
function(b,c){return b+c.text()})};e.renderLatex=function(b){this.jQ.children().slice(1).remove();this.ends[-1]=this.ends[1]=0;delete this.cursor.selection;this.cursor.insAtRightEnd(this).writeLatex(b)};e.onKey=function(b,c){switch(b){case "Ctrl-Shift-Backspace":case "Ctrl-Backspace":for(;this.cursor[-1]||this.cursor.selection;)this.cursor.backspace();break;case "Shift-Backspace":case "Backspace":this.cursor.backspace();break;case "Esc":case "Tab":case "Spacebar":var h=this.cursor.parent;if(h===this.cursor.root){"Spacebar"===
b&&c.preventDefault();return}this.cursor.prepareMove();h[1]?this.cursor.insAtLeftEnd(h[1]):this.cursor.insRightOf(h.parent);break;case "Shift-Tab":case "Shift-Esc":case "Shift-Spacebar":h=this.cursor.parent;if(h===this.cursor.root){"Shift-Spacebar"===b&&c.preventDefault();return}this.cursor.prepareMove();h[-1]?this.cursor.insAtRightEnd(h[-1]):this.cursor.insLeftOf(h.parent);break;case "Enter":"function"===typeof savemathquill&&savemathquill();break;case "End":this.cursor.prepareMove().insAtRightEnd(this.cursor.parent);
break;case "Ctrl-End":this.cursor.prepareMove().insAtRightEnd(this);break;case "Shift-End":for(;this.cursor[1];)this.cursor.selectRight();break;case "Ctrl-Shift-End":for(;this.cursor[1]||this.cursor.parent!==this;)this.cursor.selectRight();break;case "Home":this.cursor.prepareMove().insAtLeftEnd(this.cursor.parent);break;case "Ctrl-Home":this.cursor.prepareMove().insAtLeftEnd(this);break;case "Shift-Home":for(;this.cursor[-1];)this.cursor.selectLeft();break;case "Ctrl-Shift-Home":for(;this.cursor[-1]||
this.cursor.parent!==this;)this.cursor.selectLeft();break;case "Left":this.cursor.moveLeft();break;case "Shift-Left":this.cursor.selectLeft();break;case "Ctrl-Left":break;case "Right":this.cursor.moveRight();break;case "Shift-Right":this.cursor.selectRight();break;case "Ctrl-Right":break;case "Up":this.cursor.moveUp();break;case "Down":this.cursor.moveDown();break;case "Shift-Up":if(this.cursor[-1])for(;this.cursor[-1];)this.cursor.selectLeft();else this.cursor.selectLeft();case "Shift-Down":if(this.cursor[1])for(;this.cursor[1];)this.cursor.selectRight();
else this.cursor.selectRight();case "Ctrl-Up":break;case "Ctrl-Down":break;case "Ctrl-Shift-Del":case "Ctrl-Del":for(;this.cursor[1]||this.cursor.selection;)this.cursor.deleteForward();break;case "Shift-Del":case "Del":this.cursor.deleteForward();break;case "Meta-A":case "Ctrl-A":if(this!==this.cursor.root)return;for(this.cursor.prepareMove().insAtRightEnd(this);this.cursor[-1];)this.cursor.selectLeft();break;default:return!1}c.preventDefault();return!1};e.onText=function(b){this.cursor.write(b);
return!1}}),la=z(w,function(e,m){e.init=function(b){m.init.call(this,"$");this.cursor=b};e.htmlTemplate='<span class="mathquill-rendered-math">&0</span>';e.createBlocks=function(){this.ends[-1]=this.ends[1]=H();this.blocks=[this.ends[-1]];this.ends[-1].parent=this;this.ends[-1].cursor=this.cursor;this.ends[-1].write=function(b,c,h){"$"!==c?I.prototype.write.call(this,b,c,h):this.isEmpty()?(b.insRightOf(this.parent).backspace().show(),p("\\$","$").createLeftOf(b)):b[1]?b[-1]?I.prototype.write.call(this,
b,c,h):b.insLeftOf(this.parent):b.insRightOf(this.parent)}};e.latex=function(){return"$"+this.ends[-1].latex()+"$"}}),T=z(I,function(e){e.renderLatex=function(m){var b=this.cursor;this.jQ.children().slice(1).remove();this.ends[-1]=this.ends[1]=0;delete b.selection;b.show().insAtRightEnd(this);var c=N.regex,h=N.string,n=N.eof,g=N.all,t=h("$").then(ha).skip(h("$").or(n)).map(function(v){var B=la(b);B.createBlocks();var E=B.ends[-1];v.children().adopt(E,0,0);return B});c=h("\\$").result("$").or(c(/^[^$]/)).map(p);
if(m=t.or(c).many().skip(n).or(g.result(!1)).parse(m)){for(n=0;n<m.length;n+=1)m[n].adopt(this,this.ends[1],0);m=this.join("html");y.jQize(m).appendTo(this.jQ);this.finalizeInsert()}};e.onKey=function(m){"Spacebar"!==m&&"Shift-Spacebar"!==m&&H.prototype.onKey.apply(this,arguments)};e.onText=H.prototype.onText;e.write=function(m,b,c){c&&c.remove();if("$"===b)la(m).createLeftOf(m);else{var h;"<"===b?h="&lt;":">"===b&&(h="&gt;");p(b,h).createLeftOf(m)}}}),K={},a={},ka=k,F=document.createElement("div").style,
ia={transform:1,WebkitTransform:1,MozTransform:1,OTransform:1,msTransform:1},ra;for(ra in ia)if(ra in F){var sa=ra;break}if(sa)var na=function(e,m,b){e.css(sa,"scale("+m+","+b+")")};else"filter"in F?(ka=function(e){e.className=e.className},na=function(e,m,b){function c(){e.css("marginRight",(1+e.width())*(m-1)/m+"px")}m/=1+(b-1)/2;e.addClass("matrixed").css({fontSize:b+.05+"em",marginTop:"-.05em",filter:"progid:DXImageTransform.Microsoft.Matrix(M11="+m+",SizingMethod='auto expand')"});c();var h=setInterval(c);
G(window).load(function(){clearTimeout(h);c()})}):na=function(e,m,b){e.css("fontSize",b+"em")};F=z(w,function(e,m){e.init=function(b,c,h){m.init.call(this,b,"<"+c+" "+h+">&0</"+c+">")}});a.mathrm=f(F,"\\mathrm","span",'class="roman font"');a.mathit=f(F,"\\mathit","i",'class="font"');a.mathbf=f(F,"\\mathbf","b",'class="font"');a.mathsf=f(F,"\\mathsf","span",'class="sans-serif font"');a.mathtt=f(F,"\\mathtt","span",'class="monospace font"');a.underline=f(F,"\\underline","span",'class="non-leaf underline"');
a.overline=a.bar=f(F,"\\overline","span",'class="non-leaf overline"');var aa=z(w,function(e,m){e.init=function(b,c,h){m.init.call(this,b,"<"+c+' class="non-leaf">&0</'+c+">",[h])};e.finalizeTree=function(){function b(c){var h=this.parent,n=c;do{if(n[1])return c.insLeftOf(h),!1;n=n.parent.parent}while(n!==h);c.insRightOf(h);return!1}u("SupSub is only _ and ^","^"===this.ctrlSeq||"_"===this.ctrlSeq);"_"===this.ctrlSeq?(this.down=this.ends[-1],this.ends[-1].up=b):(this.up=this.ends[-1],this.ends[-1].down=
b)};e.latex=function(){var b=this.ends[-1].latex();return 1===b.length?this.ctrlSeq+b:this.ctrlSeq+"{"+(b||" ")+"}"};e.redraw=function(){this[-1]&&this[-1].respace();this[-1]instanceof aa||(this.respace(),!this[1]||this[1]instanceof aa||this[1].respace())};e.respace=function(){"\\int "===this[-1].ctrlSeq||this[-1]instanceof aa&&this[-1].ctrlSeq!=this.ctrlSeq&&this[-1][-1]&&"\\int "===this[-1][-1].ctrlSeq?this.limit||(this.limit=!0,this.jQ.addClass("limit")):this.limit&&(this.limit=!1,this.jQ.removeClass("limit"));
if(this.respaced=this[-1]instanceof aa&&this[-1].ctrlSeq!=this.ctrlSeq&&!this[-1].respaced){var b=+this.jQ.css("fontSize").slice(0,-2),c=this[-1].jQ.outerWidth(),h=this.jQ.outerWidth();this.jQ.css({left:(this.limit&&"_"===this.ctrlSeq?-.25:0)-c/b+"em",marginRight:.1-ea(h,c)/b+"em"})}else this.limit&&"_"===this.ctrlSeq?this.jQ.css({left:"-.25em",marginRight:""}):this.jQ.css({left:"",marginRight:""});this[1]instanceof aa&&this[1].respace();return this}});a.subscript=a._=f(aa,"_","sub","_");a.superscript=
a.supscript=a["^"]=f(aa,"^","sup","**");F=a.frac=a.dfrac=a.cfrac=a.fraction=z(w,function(e,m){e.ctrlSeq="\\frac";e.htmlTemplate='<span class="fraction non-leaf"><span class="numerator">&0</span><span class="denominator">&1</span><span style="display:inline-block;width:0">&nbsp;</span></span>';e.textTemplate=["(","/",")"];e.finalizeTree=function(){this.up=this.ends[1].up=this.ends[-1];this.down=this.ends[-1].down=this.ends[1]};e.redraw=function(){if(R.browser.msie&&7>=parseInt(R.browser.version,10)){var b=
this.jQ,c=b.children(".numerator");b=b.children(".denominator");c.css("width","auto");b.css("width","auto");var h=Math.max(c.width(),b.width());c.css("width",h+"px");b.css("width",h+"px")}}});var wa=a.over=K["/"]=z(F,function(e,m){e.createLeftOf=function(b){if(!this.replacedFragment){for(var c=b[-1];c&&!(c instanceof D||c instanceof oa||c instanceof ma||-1<",;:".indexOf(c.ctrlSeq));)c=c[-1];c instanceof ma&&c[1]instanceof aa&&(c=c[1],c[1]instanceof aa&&c[1].ctrlSeq!=c.ctrlSeq&&(c=c[1]));c!==b[-1]&&
(this.replaces(ca(c[1]||b.parent.ends[-1],b[-1])),b[-1]=c)}m.createLeftOf.call(this,b)}});F=a.sqrt=a["\u00e2\u02c6\u0161"]=z(w,function(e,m){e.ctrlSeq="\\sqrt";e.htmlTemplate='<span class="non-leaf"><span class="scaled sqrt-prefix">&radic;</span><span class="non-leaf sqrt-stem">&0</span></span>';e.textTemplate=["sqrt(",")"];e.parser=function(){return ha.optBlock.then(function(b){return ha.block.map(function(c){var h=xa();h.blocks=[b,c];b.adopt(h,0,0);c.adopt(h,b,0);return h})}).or(m.parser.call(this))};
e.redraw=function(){var b=this.ends[1].jQ;na(b.prev(),1,b.innerHeight()/+b.css("fontSize").slice(0,-2)-.1)}});a.vec=z(w,function(e,m){e.ctrlSeq="\\vec";e.htmlTemplate='<span class="non-leaf"><span class="vector-prefix">&rarr;</span><span class="vector-stem">&0</span></span>';e.textTemplate=["vec(",")"]});var xa=a.nthroot=z(F,function(e,m){e.htmlTemplate='<sup class="nthroot non-leaf">&0</sup><span class="scaled"><span class="sqrt-prefix scaled">&radic;</span><span class="sqrt-stem non-leaf">&1</span></span>';
e.textTemplate=["sqrt[","](",")"];e.latex=function(){return"\\sqrt["+this.ends[-1].latex()+"]{"+this.ends[1].latex()+"}"}}),ja=z(w,function(e,m){e.init=function(b,c,h,n){m.init.call(this,"\\left"+h,'<span class="non-leaf"><span class="scaled paren">'+b+'</span><span class="non-leaf">&0</span><span class="scaled paren">'+c+"</span></span>",[b,c]);this.end="\\right"+n};e.jQadd=function(){m.jQadd.apply(this,arguments);var b=this.jQ;this.bracketjQs=b.children(":first").add(b.children(":last"))};e.latex=
function(){return this.ctrlSeq+this.ends[-1].latex()+this.end};e.redraw=function(){var b=this.ends[-1].jQ;b=b.outerHeight()/+b.css("fontSize").slice(0,-2);na(this.bracketjQs,ea(1+.2*(b-1),1.2),1.05*b)}});a.left=z(w,function(e){e.parser=function(){var m=N.regex,b=N.string,c=N.succeed,h=N.optWhitespace;return h.then(m(/^(?:[([|]|\\\{)/)).then(function(n){"\\"===n.charAt(0)&&(n=n.slice(1));var g=K[n]();return ha.map(function(t){g.blocks=[t];t.adopt(g,0,0)}).then(b("\\right")).skip(h).then(m(/^(?:[\])|]|\\\})/)).then(function(t){return t.slice(-1)!==
g.end.slice(-1)?N.fail("open doesn't match close"):c(g)})})}});a.right=z(w,function(e){e.parser=function(){return N.fail("unmatched \\right")}});a.intervalopenleft=f(ja,"(","]","(","]");a.intervalopenright=f(ja,"[",")","[",")");a.lbrace=K["{"]=f(ja,"{","}","\\{","\\}");a.langle=a.lang=f(ja,"&lang;","&rang;","\\langle ","\\rangle ");var qa=z(ja,function(e,m){e.createLeftOf=function(b){b[1]||!b.parent.parent||b.parent.parent.end!==this.end||this.replacedFragment?m.createLeftOf.call(this,b):b.insRightOf(b.parent.parent)};
e.placeCursor=function(b){this.ends[-1].blur();b.insRightOf(this)}});a.rbrace=K["}"]=f(qa,"{","}","\\{","\\}");a.rangle=a.rang=f(qa,"&lang;","&rang;","\\langle ","\\rangle ");ia=function(e,m){e.init=function(b,c){m.init.call(this,b,c,b,c)}};F=z(ja,ia);a.lparen=K["("]=f(F,"(",")");a.lbrack=a.lbracket=K["["]=f(F,"[","]");ia=z(qa,ia);a.rparen=K[")"]=f(ia,"(",")");a.rbrack=a.rbracket=K["]"]=f(ia,"[","]");a.lpipe=a.rpipe=K["|"]=z(F,function(e,m){e.init=function(){m.init.call(this,"|","|")};e.createLeftOf=
qa.prototype.createLeftOf});var oa=K.$=a.text=a.textnormal=a.textrm=a.textup=a.textmd=z(w,function(e,m){e.ctrlSeq="\\text";e.htmlTemplate='<span class="text">&0</span>';e.replaces=function(b){b instanceof ca?this.replacedText=b.remove().jQ.text():"string"===typeof b&&(this.replacedText=b)};e.textTemplate=['"','"'];e.parser=function(){var b=this,c=N.string,h=N.regex;return N.optWhitespace.then(c("{")).then(h(/^[^}]*/)).skip(c("}")).map(function(n){b.createBlocks();for(var g=b.ends[-1],t=0;t<n.length;t+=
1)p(n.charAt(t)).adopt(g,g.ends[1],0);return b})};e.createBlocks=function(){this.ends[-1]=this.ends[1]=ya();this.blocks=[this.ends[-1]];this.ends[-1].parent=this};e.finalizeInsert=function(){this.ends[-1].blur=function(){delete this.blur;return this};m.finalizeInsert.call(this)};e.createLeftOf=function(b){m.createLeftOf.call(this,this.cursor=b);if(this.replacedText)for(var c=0;c<this.replacedText.length;c+=1)this.ends[-1].write(b,this.replacedText.charAt(c))}}),ya=z(I,function(e,m){e.onKey=function(b,
c){if("Spacebar"===b||"Shift-Spacebar"===b)return!1};e.deleteOutOf=function(b,c){this.isEmpty()&&c.insRightOf(this.parent)};e.write=function(b,c,h){h&&h.remove();if("$"!==c){var n;"<"===c?n="&lt;":">"===c&&(n="&gt;");p(c,n).createLeftOf(b)}else this.isEmpty()?(b.insRightOf(this.parent).backspace(),p("\\$","$").createLeftOf(b)):b[1]?b[-1]?(c=oa(),c.replaces(ca(b[1],this.ends[1])),b.insRightOf(this.parent),c.adopt=function(){delete this.adopt;this.adopt.apply(this,arguments);this[-1]=0},c.createLeftOf(b),
c[-1]=this.parent,b.insLeftOf(c)):b.insLeftOf(this.parent):b.insRightOf(this.parent);return!1};e.blur=function(){this.jQ.removeClass("hasCursor");if(this.isEmpty()){var b=this.parent,c=b.cursor;c.parent===this?this.jQ.addClass("empty"):(c.hide(),b.remove(),c[1]===b?c[1]=b[1]:c[-1]===b&&(c[-1]=b[-1]),c.show().parent.bubble("redraw"))}return this};e.focus=function(){m.focus.call(this);var b=this.parent;if(b[1].ctrlSeq===b.ctrlSeq){var c=this,h=b.cursor;b=b[1].ends[-1];b.eachChild(function(n){n.parent=
c;n.jQ.appendTo(c.jQ)});this.ends[1]?this.ends[1][1]=b.ends[-1]:this.ends[-1]=b.ends[-1];b.ends[-1][-1]=this.ends[1];this.ends[1]=b.ends[1];b.parent.remove();h[-1]?h.insRightOf(h[-1]):h.insAtLeftEnd(this);h.parent.bubble("redraw")}else b[-1].ctrlSeq===b.ctrlSeq&&(h=b.cursor,h[-1]?b[-1].ends[-1].focus():h.insAtRightEnd(b[-1].ends[-1]));return this}});a.em=a.italic=a.italics=a.emph=a.textit=a.textsl=V("\\textit","i",'class="text"');a.strong=a.bold=a.textbf=V("\\textbf","b",'class="text"');a.sf=a.textsf=
V("\\textsf","span",'class="sans-serif text"');a.tt=a.texttt=V("\\texttt","span",'class="monospace text"');a.textsc=V("\\textsc","span",'style="font-variant:small-caps" class="text"');a.uppercase=V("\\uppercase","span",'style="text-transform:uppercase" class="text"');a.lowercase=V("\\lowercase","span",'style="text-transform:lowercase" class="text"');K["\\"]=z(w,function(e,m){e.ctrlSeq="\\";e.replaces=function(b){this._replacedFragment=b.disown();this.isEmpty=function(){return!1}};e.htmlTemplate='<span class="latex-command-input non-leaf">\\<span>&0</span></span>';
e.textTemplate=["\\"];e.createBlocks=function(){m.createBlocks.call(this);this.ends[-1].focus=function(){this.parent.jQ.addClass("hasCursor");this.isEmpty()&&this.parent.jQ.removeClass("empty");return this};this.ends[-1].blur=function(){this.parent.jQ.removeClass("hasCursor");this.isEmpty()&&this.parent.jQ.addClass("empty");return this}};e.createLeftOf=function(b){m.createLeftOf.call(this,b);this.cursor=b.insAtRightEnd(this.ends[-1]);if(this._replacedFragment){var c=this.jQ[0];this.jQ=this._replacedFragment.jQ.addClass("blur").bind("mousedown mousemove",
function(h){G(h.target=c).trigger(h);return!1}).insertBefore(this.jQ).add(this.jQ)}this.ends[-1].write=function(h,n,g){g&&g.remove();n.match(/[a-z]/i)?p(n).createLeftOf(h):(this.parent.renderCommand(),"\\"===n&&this.isEmpty()||this.parent.parent.write(h,n))}};e.latex=function(){return"\\"+this.ends[-1].latex()+" "};e.onKey=function(b,c){if("Tab"===b||"Enter"===b||"Spacebar"===b)return this.renderCommand(),c.preventDefault(),!1};e.renderCommand=function(){this.jQ=this.jQ.last();this.remove();this[1]?
this.cursor.insLeftOf(this[1]):this.cursor.insAtRightEnd(this.parent);var b=this.ends[-1].latex();b||(b="backslash");this.cursor.insertCmd(b,this._replacedFragment)}});F=a.binom=a.binomial=z(w,function(e,m){e.ctrlSeq="\\binom";e.htmlTemplate='<span class="paren scaled">(</span><span class="non-leaf"><span class="array non-leaf"><span>&0</span><span>&1</span></span></span><span class="paren scaled">)</span>';e.textTemplate=["choose(",",",")"];e.redraw=function(){var b=this.jQ.eq(1);b=b.outerHeight()/
+b.css("fontSize").slice(0,-2);var c=this.jQ.filter(".paren");na(c,ea(1+.2*(b-1),1.2),1.05*b)}});a.choose=z(F,function(e){e.createLeftOf=wa.prototype.createLeftOf});a.vector=z(w,function(e,m){e.ctrlSeq="\\vector";e.htmlTemplate='<span class="array"><span>&0</span></span>';e.latex=function(){return"\\begin{matrix}"+this.foldChildren([],function(b,c){b.push(c.latex());return b}).join("\\\\")+"\\end{matrix}"};e.text=function(){return"["+this.foldChildren([],function(b,c){b.push(c.text());return b}).join()+
"]"};e.createLeftOf=function(b){m.createLeftOf.call(this,this.cursor=b)};e.onKey=function(b,c){var h=this.cursor.parent;if(h.parent===this){if("Enter"===b){var n=I();n.parent=this;n.jQ=G("<span></span>").attr("mathquill-block-id",n.id).insertAfter(h.jQ);h[1]?h[1][-1]=n:this.ends[1]=n;n[1]=h[1];h[1]=n;n[-1]=h;this.bubble("redraw").cursor.insAtRightEnd(n);c.preventDefault();return!1}if("Tab"===b&&!h[1]){if(h.isEmpty()){if(h[-1])return this.cursor.insRightOf(this),delete h[-1][1],this.ends[1]=h[-1],
h.jQ.remove(),this.bubble("redraw"),c.preventDefault(),!1;return}n=I();n.parent=this;n.jQ=G("<span></span>").attr("mathquill-block-id",n.id).appendTo(this.jQ);this.ends[1]=n;h[1]=n;n[-1]=h;this.bubble("redraw").cursor.insAtRightEnd(n);c.preventDefault();return!1}if(8===c.which){if(h.isEmpty())return h[-1]?(this.cursor.insAtRightEnd(h[-1]),h[-1][1]=h[1]):(this.cursor.insLeftOf(this),this.ends[-1]=h[1]),h[1]?h[1][-1]=h[-1]:this.ends[1]=h[-1],h.jQ.remove(),this.isEmpty()?this.cursor.deleteForward():
this.bubble("redraw"),c.preventDefault(),!1;if(!this.cursor[-1])return c.preventDefault(),!1}}}});a.editable=z(la,function(e,m){e.init=function(){w.prototype.init.call(this,"\\editable")};e.jQadd=function(){m.jQadd.apply(this,arguments);var b=this.ends[-1].disown(),c=this.jQ.children().detach();this.ends[-1]=this.ends[1]=H();this.blocks=[this.ends[-1]];this.ends[-1].parent=this;M(this.jQ,this.ends[-1],!1,!0);this.cursor=this.ends[-1].cursor;b.children().adopt(this.ends[-1],0,0);c.appendTo(this.ends[-1].jQ);
this.ends[-1].cursor.insAtRightEnd(this.ends[-1])};e.latex=function(){return this.ends[-1].latex()};e.text=function(){return this.ends[-1].text()}});a.f=f(P,"f",'<var class="florin">&fnof;</var><span style="display:inline-block;width:0">&nbsp;</span>');var U=z(P,function(e,m){e.init=function(b,c){m.init.call(this,b,"<var>"+(c||b)+"</var>")};e.text=function(){var b=this.ctrlSeq;!this[-1]||this[-1]instanceof U||this[-1]instanceof D||(b="*"+b);!this[1]||this[1]instanceof D||"^"===this[1].ctrlSeq||(b+=
"*");return b};e.createLeftOf=function(b){var c=this.ctrlSeq;for(d=b[-1];d&&d instanceof U;)c=d.ctrlSeq+c,d=d[-1];var h;if(h=c.match(/(sqrt|root|arcsin|arccos|arctan|sin|cos|tan|sec|csc|cot|log|ln)/)){for(c=0;c<h[0].length-1;c++)b.selectLeft();"root"==h[0]&&(h[0]="nthroot{3}");h[0].match(/(sqrt|root)/)?b.writeLatex("\\"+h[0]+"{}").parent.blur():b.writeLatex("\\"+h[0]+"\\left(\\right)").parent.blur();b.moveLeft()}else(h=c.match(/(pi|^oo)$/))?("oo"==h[0]&&(h[0]="infty"),b.selectLeft(),b.writeLatex("\\"+
h[0]).parent.blur()):w.prototype.createLeftOf.apply(this,arguments)}}),p=z(P,function(e,m){e.init=function(b,c){m.init.call(this,b,"<span>"+(c||b)+"</span>")}});K[" "]=f(p,"\\:"," ");a.prime=K["'"]=f(p,"'","&prime;");F=z(P,function(e,m){e.init=function(b,c){m.init.call(this,b,'<span class="nonSymbola">'+(c||b)+"</span>")}});a["@"]=F;a["&"]=f(F,"\\&","&amp;");a["%"]=f(F,"\\%","%");a.alpha=a.beta=a.gamma=a.delta=a.zeta=a.eta=a.theta=a.iota=a.kappa=a.mu=a.nu=a.xi=a.rho=a.sigma=a.tau=a.chi=a.psi=a.omega=
z(U,function(e,m){e.init=function(b){m.init.call(this,"\\"+b+" ","&"+b+";")}});a.phi=f(U,"\\phi ","&#981;");a.phiv=a.varphi=f(U,"\\varphi ","&phi;");a.epsilon=f(U,"\\epsilon ","&#1013;");a.epsiv=a.varepsilon=f(U,"\\varepsilon ","&epsilon;");a.piv=a.varpi=f(U,"\\varpi ","&piv;");a.sigmaf=a.sigmav=a.varsigma=f(U,"\\varsigma ","&sigmaf;");a.thetav=a.vartheta=a.thetasym=f(U,"\\vartheta ","&thetasym;");a.upsilon=a.upsi=f(U,"\\upsilon ","&upsilon;");a.gammad=a.Gammad=a.digamma=f(U,"\\digamma ","&#989;");
a.kappav=a.varkappa=f(U,"\\varkappa ","&#1008;");a.rhov=a.varrho=f(U,"\\varrho ","&#1009;");a.pi=a["\u00cf\u20ac"]=f(F,"\\pi ","&pi;");a.lambda=f(F,"\\lambda ","&lambda;");a.Upsilon=a.Upsi=a.upsih=a.Upsih=f(P,"\\Upsilon ",'<var style="font-family: serif">&upsih;</var>');a.Gamma=a.Delta=a.Theta=a.Lambda=a.Xi=a.Pi=a.Sigma=a.Phi=a.Psi=a.Omega=a.forall=z(p,function(e,m){e.init=function(b){m.init.call(this,"\\"+b+" ","&"+b+";")}});F=z(w,function(e){e.init=function(m){this.latex=m};e.createLeftOf=function(m){m.writeLatex(this.latex)};
e.parser=function(){var m=ha.parse(this.latex).children();return N.succeed(m)}});a["\u00b9"]=f(F,"^1");a["\u00b2"]=f(F,"^2");a["\u00b3"]=f(F,"^3");a["\u00bc"]=f(F,"\\frac14");a["\u00bd"]=f(F,"\\frac12");a["\u00be"]=f(F,"\\frac34");var D=z(P,function(e,m){e.init=function(b,c,h){m.init.call(this,b,'<span class="binary-operator">'+c+"</span>",h)}});F=z(D,function(e){e.init=p.prototype.init;e.respace=function(){this.jQ[0].className=this[-1]?this[-1]instanceof D&&this[1]&&!(this[1]instanceof D)?"unary-operator":
"binary-operator":"";return this}});a["+"]=f(F,"+","+");a["\u2013"]=a["-"]=f(F,"-","&minus;");a["\u00b1"]=a.pm=a.plusmn=a.plusminus=f(F,"\\pm ","&plusmn;");a.mp=a.mnplus=a.minusplus=f(F,"\\mp ","&#8723;");K["*"]=a.sdot=a.cdot=f(D,"\\cdot ","&middot;");a["="]=f(D,"=","=");a["<"]=f(D,"<","&lt;");a[">"]=f(D,">","&gt;");a.notin=a.sim=a.cong=a.equiv=a.oplus=a.otimes=z(D,function(e,m){e.init=function(b){m.init.call(this,"\\"+b+" ","&"+b+";")}});a.times=f(D,"\\times ","&times;","[x]");a["\u00f7"]=a.div=
a.divide=a.divides=f(D,"\\div ","&divide;","[/]");a["\u2260"]=a.ne=a.neq=f(D,"\\ne ","&ne;");a.ast=a.star=a.loast=a.lowast=f(D,"\\ast ","&lowast;");a.therefor=a.therefore=f(D,"\\therefore ","&there4;");a.cuz=a.because=f(D,"\\because ","&#8757;");a.prop=a.propto=f(D,"\\propto ","&prop;");a["\u2248"]=a.asymp=a.approx=f(D,"\\approx ","&asymp;");a.lt=f(D,"<","&lt;");a.gt=f(D,">","&gt;");a["\u2264"]=a.le=a.leq=f(D,"\\le ","&le;");a["\u2265"]=a.ge=a.geq=f(D,"\\ge ","&ge;");a.isin=a["in"]=f(D,"\\in ","&isin;");
a.ni=a.contains=f(D,"\\ni ","&ni;");a.notni=a.niton=a.notcontains=a.doesnotcontain=f(D,"\\not\\ni ","&#8716;");a.sub=a.subset=f(D,"\\subset ","&sub;");a.sup=a.supset=a.superset=f(D,"\\supset ","&sup;");a.nsub=a.notsub=a.nsubset=a.notsubset=f(D,"\\not\\subset ","&#8836;");a.nsup=a.notsup=a.nsupset=a.notsupset=a.nsuperset=a.notsuperset=f(D,"\\not\\supset ","&#8837;");a.sube=a.subeq=a.subsete=a.subseteq=f(D,"\\subseteq ","&sube;");a.supe=a.supeq=a.supsete=a.supseteq=a.supersete=a.superseteq=f(D,"\\supseteq ",
"&supe;");a.nsube=a.nsubeq=a.notsube=a.notsubeq=a.nsubsete=a.nsubseteq=a.notsubsete=a.notsubseteq=f(D,"\\not\\subseteq ","&#8840;");a.nsupe=a.nsupeq=a.notsupe=a.notsupeq=a.nsupsete=a.nsupseteq=a.notsupsete=a.notsupseteq=a.nsupersete=a.nsuperseteq=a.notsupersete=a.notsuperseteq=f(D,"\\not\\supseteq ","&#8841;");var ma=z(P,function(e,m){e.init=function(b,c){m.init.call(this,b,"<big>"+c+"</big>")}});a["\u2211"]=a.sum=a.summation=f(ma,"\\sum ","&sum;");a["\u220f"]=a.prod=a.product=f(ma,"\\prod ","&prod;");
a.coprod=a.coproduct=f(ma,"\\coprod ","&#8720;");a["\u222b"]=a["int"]=a.integral=f(ma,"\\int ","&int;");a.N=a.naturals=a.Naturals=f(p,"\\mathbb{N}","&#8469;");a.P=a.primes=a.Primes=a.projective=a.Projective=a.probability=a.Probability=f(p,"\\mathbb{P}","&#8473;");a.Z=a.integers=a.Integers=f(p,"\\mathbb{Z}","&#8484;");a.Q=a.rationals=a.Rationals=f(p,"\\mathbb{Q}","&#8474;");a.R=a.reals=a.Reals=f(p,"\\mathbb{R}","&#8477;");a.C=a.complex=a.Complex=a.complexes=a.Complexes=a.complexplane=a.Complexplane=
a.ComplexPlane=f(p,"\\mathbb{C}","&#8450;");a.H=a.Hamiltonian=a.quaternions=a.Quaternions=f(p,"\\mathbb{H}","&#8461;");a.quad=a.emsp=f(p,"\\quad ","    ");a.qquad=f(p,"\\qquad ","        ");a.diamond=f(p,"\\diamond ","&#9671;");a.bigtriangleup=f(p,"\\bigtriangleup ","&#9651;");a.ominus=f(p,"\\ominus ","&#8854;");a.uplus=f(p,"\\uplus ","&#8846;");a.bigtriangledown=f(p,"\\bigtriangledown ","&#9661;");a.sqcap=f(p,"\\sqcap ","&#8851;");a.triangleleft=f(p,"\\triangleleft ","&#8882;");a.sqcup=f(p,"\\sqcup ",
"&#8852;");a.triangleright=f(p,"\\triangleright ","&#8883;");a.odot=f(p,"\\odot ","&#8857;");a.bigcirc=f(p,"\\bigcirc ","&#9711;");a.dagger=f(p,"\\dagger ","&#0134;");a.ddagger=f(p,"\\ddagger ","&#135;");a.wr=f(p,"\\wr ","&#8768;");a.amalg=f(p,"\\amalg ","&#8720;");a.models=f(p,"\\models ","&#8872;");a.prec=f(p,"\\prec ","&#8826;");a.succ=f(p,"\\succ ","&#8827;");a.preceq=f(p,"\\preceq ","&#8828;");a.succeq=f(p,"\\succeq ","&#8829;");a.simeq=f(p,"\\simeq ","&#8771;");a.mid=f(p,"\\mid ","&#8739;");
a.ll=f(p,"\\ll ","&#8810;");a.gg=f(p,"\\gg ","&#8811;");a.parallel=f(p,"\\parallel ","&#8741;");a.bowtie=f(p,"\\bowtie ","&#8904;");a.sqsubset=f(p,"\\sqsubset ","&#8847;");a.sqsupset=f(p,"\\sqsupset ","&#8848;");a.smile=f(p,"\\smile ","&#8995;");a.sqsubseteq=f(p,"\\sqsubseteq ","&#8849;");a.sqsupseteq=f(p,"\\sqsupseteq ","&#8850;");a.doteq=f(p,"\\doteq ","&#8784;");a.frown=f(p,"\\frown ","&#8994;");a.vdash=f(p,"\\vdash ","&#8870;");a.dashv=f(p,"\\dashv ","&#8867;");a.longleftarrow=f(p,"\\longleftarrow ",
"&#8592;");a.longrightarrow=f(p,"\\longrightarrow ","&#8594;");a.Longleftarrow=f(p,"\\Longleftarrow ","&#8656;");a.Longrightarrow=f(p,"\\Longrightarrow ","&#8658;");a.longleftrightarrow=f(p,"\\longleftrightarrow ","&#8596;");a.updownarrow=f(p,"\\updownarrow ","&#8597;");a.Longleftrightarrow=f(p,"\\Longleftrightarrow ","&#8660;");a.Updownarrow=f(p,"\\Updownarrow ","&#8661;");a.mapsto=f(p,"\\mapsto ","&#8614;");a.nearrow=f(p,"\\nearrow ","&#8599;");a.hookleftarrow=f(p,"\\hookleftarrow ","&#8617;");
a.hookrightarrow=f(p,"\\hookrightarrow ","&#8618;");a.searrow=f(p,"\\searrow ","&#8600;");a.leftharpoonup=f(p,"\\leftharpoonup ","&#8636;");a.rightharpoonup=f(p,"\\rightharpoonup ","&#8640;");a.swarrow=f(p,"\\swarrow ","&#8601;");a.leftharpoondown=f(p,"\\leftharpoondown ","&#8637;");a.rightharpoondown=f(p,"\\rightharpoondown ","&#8641;");a.nwarrow=f(p,"\\nwarrow ","&#8598;");a.ldots=f(p,"\\ldots ","&#8230;");a.cdots=f(p,"\\cdots ","&#8943;");a.vdots=f(p,"\\vdots ","&#8942;");a.ddots=f(p,"\\ddots ",
"&#8944;");a.surd=f(p,"\\surd ","&#8730;");a.triangle=f(p,"\\triangle ","&#9653;");a.ell=f(p,"\\ell ","&#8467;");a.top=f(p,"\\top ","&#8868;");a.flat=f(p,"\\flat ","&#9837;");a.natural=f(p,"\\natural ","&#9838;");a.sharp=f(p,"\\sharp ","&#9839;");a.wp=f(p,"\\wp ","&#8472;");a.bot=f(p,"\\bot ","&#8869;");a.clubsuit=f(p,"\\clubsuit ","&#9827;");a.diamondsuit=f(p,"\\diamondsuit ","&#9826;");a.heartsuit=f(p,"\\heartsuit ","&#9825;");a.spadesuit=f(p,"\\spadesuit ","&#9824;");a.oint=f(p,"\\oint ","&#8750;");
a.bigcap=f(p,"\\bigcap ","&#8745;");a.bigcup=f(p,"\\bigcup ","&#8746;");a.bigsqcup=f(p,"\\bigsqcup ","&#8852;");a.bigvee=f(p,"\\bigvee ","&#8744;");a.bigwedge=f(p,"\\bigwedge ","&#8743;");a.bigodot=f(p,"\\bigodot ","&#8857;");a.bigotimes=f(p,"\\bigotimes ","&#8855;");a.bigoplus=f(p,"\\bigoplus ","&#8853;");a.biguplus=f(p,"\\biguplus ","&#8846;");a.lfloor=f(p,"\\lfloor ","&#8970;");a.rfloor=f(p,"\\rfloor ","&#8971;");a.lceil=f(p,"\\lceil ","&#8968;");a.rceil=f(p,"\\rceil ","&#8969;");a.slash=f(p,"\\slash ",
"&#47;");a.opencurlybrace=f(p,"\\opencurlybrace ","&#123;");a.closecurlybrace=f(p,"\\closecurlybrace ","&#125;");a.caret=f(p,"\\caret ","^");a.underscore=f(p,"\\underscore ","_");a.backslash=f(p,"\\backslash ","\\");a.vert=f(p,"|");a.perp=a.perpendicular=f(p,"\\perp ","&perp;");a.nabla=a.del=f(p,"\\nabla ","&nabla;");a.hbar=f(p,"\\hbar ","&#8463;");a.AA=a.Angstrom=a.angstrom=f(p,"\\text\\AA ","&#8491;");a.ring=a.circ=a.circle=f(p,"\\circ ","&#8728;");a.bull=a.bullet=f(p,"\\bullet ","&bull;");a.setminus=
a.smallsetminus=f(p,"\\setminus ","&#8726;");a.not=a["\u00ac"]=a.neg=f(p,"\\neg ","&not;");a["\u2026"]=a.dots=a.ellip=a.hellip=a.ellipsis=a.hellipsis=f(p,"\\dots ","&hellip;");a.converges=a.darr=a.dnarr=a.dnarrow=a.downarrow=f(p,"\\downarrow ","&darr;");a.dArr=a.dnArr=a.dnArrow=a.Downarrow=f(p,"\\Downarrow ","&dArr;");a.diverges=a.uarr=a.uparrow=f(p,"\\uparrow ","&uarr;");a.uArr=a.Uparrow=f(p,"\\Uparrow ","&uArr;");a.to=f(D,"\\to ","&rarr;");a.rarr=a.rightarrow=f(p,"\\rightarrow ","&rarr;");a.implies=
f(D,"\\Rightarrow ","&rArr;");a.rArr=a.Rightarrow=f(p,"\\Rightarrow ","&rArr;");a.gets=f(D,"\\gets ","&larr;");a.larr=a.leftarrow=f(p,"\\leftarrow ","&larr;");a.impliedby=f(D,"\\Leftarrow ","&lArr;");a.lArr=a.Leftarrow=f(p,"\\Leftarrow ","&lArr;");a.harr=a.lrarr=a.leftrightarrow=f(p,"\\leftrightarrow ","&harr;");a.iff=f(D,"\\Leftrightarrow ","&hArr;");a.hArr=a.lrArr=a.Leftrightarrow=f(p,"\\Leftrightarrow ","&hArr;");a.Re=a.Real=a.real=f(p,"\\Re ","&real;");a.Im=a.imag=a.image=a.imagin=a.imaginary=
a.Imaginary=f(p,"\\Im ","&image;");a.part=a.partial=f(p,"\\partial ","&part;");a.inf=a.infin=a.infty=a.infinity=f(p,"\\infty ","&infin;");a.alef=a.alefsym=a.aleph=a.alephsym=f(p,"\\aleph ","&alefsym;");a.xist=a.xists=a.exist=a.exists=f(p,"\\exists ","&exist;");a.and=a.land=a.wedge=f(p,"\\wedge ","&and;");a.or=a.lor=a.vee=f(p,"\\vee ","&or;");a.o=a.O=a.empty=a.emptyset=a.oslash=a.Oslash=a.nothing=a.varnothing=f(D,"\\varnothing ","&empty;");a.cup=a.union=f(D,"\\cup ","&cup;");a.cap=a.intersect=a.intersection=
f(D,"\\cap ","&cap;");a.deg=a.degree=f(p,"^\\circ ","&deg;");a.ang=a.angle=f(p,"\\angle ","&ang;");var ta=z(P,function(e,m){e.init=function(b){m.init.call(this,"\\"+b+" ","<span>"+b+"</span>")};e.respace=function(){this.jQ[0].className=this[1]instanceof aa||this[1]instanceof ja?"":"non-italicized-function"}});a.ln=a.lg=a.log=a.span=a.proj=a.det=a.dim=a.min=a.max=a.mod=a.lcm=a.gcd=a.gcf=a.hcf=a.lim=ta;(function(){var e="sin cos tan sec cosec csc cotan cot".split(" "),m;for(m in e)a[e[m]]=a[e[m]+"h"]=
a["a"+e[m]]=a["arc"+e[m]]=a["a"+e[m]+"h"]=a["arc"+e[m]+"h"]=ta})();var ha=function(){function e(E){for(var J=E[0]||I(),O=1;O<E.length;O+=1)E[O].children().adopt(J,J.ends[1],0);return J}var m=N.string,b=N.regex,c=N.any,h=N.optWhitespace,n=N.succeed,g=N.fail,t=N.letter.map(U),v=b(/^[^${}\\_^]/).map(p);b=b(/^[^\\a-eg-zA-Z]/).or(m("\\").then(b(/^[a-z]+/i).or(b(/^\s+/).result(" ")).or(c))).then(function(E){var J=a[E];return J?J(E).parser():g("unknown command: \\"+E)}).or(t).or(v);c=m("{").then(function(){return B}).skip(m("}"));
b=h.then(c.or(b.map(function(E){var J=I();E.adopt(J,0,0);return J})));var B=b.many().map(e).skip(h);m=m("[").then(b.then(function(E){return"]"!==E.join("latex")?n(E):g()}).many().map(e).skip(h)).skip(m("]"));h=B;h.block=b;h.optBlock=m;return h}(),va=z(l,function(e){function m(c,h){if(c[1][h])c.insAtLeftEnd(c[1][h]);else if(c[-1][h])c.insAtRightEnd(c[-1][h]);else{var n=c.parent;do{var g=n[h];if(g&&("function"===typeof g&&(g=n[h](c)),!1===g||g instanceof I)){c.upDownCache[n.id]=l(c.parent,c[-1],c[1]);
g instanceof I&&((n=c.upDownCache[g.id])?n[1]?c.insLeftOf(n[1]):c.insAtRightEnd(n.parent):(n=b(c).left,c.insAtRightEnd(g),c.seekHoriz(n,g)));break}n=n.parent.parent}while(n)}return c.clearSelection().show()}function b(c){var h=c.jQ.removeClass("cursor").offset();c.jQ.addClass("cursor");return h}e.init=function(c){this.parent=this.root=c;var h=this.jQ=this._jQ=G('<span class="cursor">&zwj;</span>');this.blink=function(){h.toggleClass("blink")};this.upDownCache={}};e.show=function(){this.jQ=this._jQ.removeClass("blink");
"intervalId"in this?clearInterval(this.intervalId):(this[1]?this.selection&&this.selection.ends[-1][-1]===this[-1]?this.jQ.insertBefore(this.selection.jQ):this.jQ.insertBefore(this[1].jQ.first()):this.jQ.appendTo(this.parent.jQ),this.parent.focus());this.intervalId=setInterval(this.blink,500);return this};e.hide=function(){"intervalId"in this&&clearInterval(this.intervalId);delete this.intervalId;this.jQ.detach();this.jQ=G();return this};e.withDirInsertAt=function(c,h,n,g){var t=this.parent;this.parent=
h;this[c]=n;this[-c]=g;t.blur()};e.insDirOf=function(c,h){A(c);this.withDirInsertAt(c,h.parent,h[c],h);this.parent.jQ.addClass("hasCursor");this.jQ.insDirOf(c,h.jQ);return this};e.insLeftOf=function(c){return this.insDirOf(-1,c)};e.insRightOf=function(c){return this.insDirOf(1,c)};e.insAtDirEnd=function(c,h){A(c);this.withDirInsertAt(c,h,0,h.ends[c]);-1===c&&h.textarea?this.jQ.insDirOf(-c,h.textarea):this.jQ.insAtDirEnd(c,h.jQ);h.focus();return this};e.insAtLeftEnd=function(c){return this.insAtDirEnd(-1,
c)};e.insAtRightEnd=function(c){return this.insAtDirEnd(1,c)};e.hopDir=function(c){A(c);this.jQ.insDirOf(c,this[c].jQ);this[-c]=this[c];this[c]=this[c][c];return this};e.hopLeft=function(){return this.hopDir(-1)};e.hopRight=function(){return this.hopDir(1)};e.moveDirWithin=function(c,h){A(c);this[c]?this[c].ends[-c]?this.insAtDirEnd(-c,this[c].ends[-c]):this.hopDir(c):this.parent!==h&&(this.parent[c]?this.insAtDirEnd(-c,this.parent[c]):this.insDirOf(c,this.parent.parent))};e.moveLeftWithin=function(c){return this.moveDirWithin(-1,
c)};e.moveRightWithin=function(c){return this.moveDirWithin(1,c)};e.moveDir=function(c){A(c);this.upDownCache={};this.selection?this.insDirOf(c,this.selection.ends[c]).clearSelection():this.moveDirWithin(c,this.root);return this.show()};e.moveLeft=function(){return this.moveDir(-1)};e.moveRight=function(){return this.moveDir(1)};e.moveUp=function(){return m(this,"up")};e.moveDown=function(){return m(this,"down")};e.seek=function(c,h,n){this.upDownCache={};var g=this.clearSelection().show();if(c.hasClass("empty"))return g.insAtLeftEnd(y[c.attr("mathquill-block-id")]),
g;n=y[c.attr("mathquill-command-id")];if(n instanceof P)return c.outerWidth()>2*(h-c.offset().left)?g.insLeftOf(n):g.insRightOf(n),g;if(!n){var t=y[c.attr("mathquill-block-id")];t||(c=c.parent(),n=y[c.attr("mathquill-command-id")],n||(t=y[c.attr("mathquill-block-id")],t||(t=g.root)))}n?g.insRightOf(n):g.insAtRightEnd(t);return g.seekHoriz(h,g.root)};e.seekHoriz=function(c,h){var n=b(this).left-c;do{this.moveLeftWithin(h);var g=n;n=b(this).left-c}while(0<n&&(this[-1]||this.parent!==h));-n>g&&this.moveRightWithin(h);
return this};e.writeLatex=function(c){this.upDownCache={};this.show().deleteSelection();var h=N.all;if(c=ha.skip(N.eof).or(h.result(!1)).parse(c))c.children().adopt(this.parent,this[-1],this[1]),y.jQize(c.join("html")).insertBefore(this.jQ),this[-1]=c.ends[1],c.finalizeInsert(),this.parent.bubble("redraw");return this.hide()};e.write=function(c){var h=this.prepareWrite();return this.insertCh(c,h)};e.insertCh=function(c,h){this.parent.write(this,c,h);return this};e.insertCmd=function(c,h){var n=a[c];
n?(n=n(c),h&&n.replaces(h),n.createLeftOf(this)):(n=oa(),n.replaces(c),n.ends[-1].focus=function(){delete this.focus;return this},n.createLeftOf(this),this.insRightOf(n),h&&h.remove());return this};e.unwrapGramp=function(){var c=this.parent.parent,h=c.parent,n=c[1],g=c[-1];c.disown().eachChild(function(t){t.isEmpty()||(t.children().adopt(h,g,n).each(function(v){v.jQ.insertBefore(c.jQ.first())}),g=t.ends[1])});if(!this[1])if(this[-1])this[1]=this[-1][1];else for(;!this[1];)if(this.parent=this.parent[1])this[1]=
this.parent.ends[-1];else{this[1]=c[1];this.parent=h;break}this[1]?this.insLeftOf(this[1]):this.insAtRightEnd(h);c.jQ.remove();c[-1]&&c[-1].respace();c[1]&&c[1].respace()};e.deleteDir=function(c){A(c);this.upDownCache={};this.show();if(!this.deleteSelection())if(this[c])this[c].isEmpty()?this[c]=this[c].remove()[c]:this.selectDir(c);else if(this.parent!==this.root){if(this.parent.parent.isEmpty())return this.insDirOf(-c,this.parent.parent).deleteDir(c);this.unwrapGramp()}this[-1]&&this[-1].respace();
this[1]&&this[1].respace();this.parent.bubble("redraw");return this};e.backspace=function(){return this.deleteDir(-1)};e.deleteForward=function(){return this.deleteDir(1)};e.selectFrom=function(c){var h=this,n=c;a:for(;;){for(var g=this;g!==h.parent.parent;g=g.parent.parent)if(g.parent===n.parent){c=g;break a}for(g=c;g!==n.parent.parent;g=g.parent.parent)if(h.parent===g.parent){c=h;n=g;break a}h.parent.parent&&(h=h.parent.parent);n.parent.parent&&(n=n.parent.parent)}if(c[1]!==n){for(h=c;h;h=h[1])if(h===
n[-1]){var t=!0;break}t||(t=n,n=c,c=t)}this.hide().selection=ua(c[-1][1]||c.parent.ends[-1],n[1][-1]||n.parent.ends[1]);this.insRightOf(n[1][-1]||n.parent.ends[1]);this.root.selectionChanged()};e.selectDir=function(c){A(c);this.upDownCache={};if(this.selection)if(this.selection.ends[c]===this[-c])this[c]?this.hopDir(c).selection.extendDir(c):this.parent!==this.root&&this.insDirOf(c,this.parent.parent).selection.levelUp();else{this.hopDir(c);if(this.selection.ends[c]===this.selection.ends[-c]){this.clearSelection().show();
return}this.selection.retractDir(c)}else{if(this[c])this.hopDir(c);else{if(this.parent===this.root)return;this.insDirOf(c,this.parent.parent)}this.hide().selection=ua(this[-c])}this.root.selectionChanged()};e.selectLeft=function(){return this.selectDir(-1)};e.selectRight=function(){return this.selectDir(1)};e.prepareMove=function(){this.upDownCache={};return this.show().clearSelection()};e.prepareEdit=function(){this.upDownCache={};return this.show().deleteSelection()};e.prepareWrite=function(){this.upDownCache=
{};return this.show().replaceSelection()};e.clearSelection=function(){this.selection&&(this.selection.clear(),delete this.selection,this.root.selectionChanged());return this};e.deleteSelection=function(){if(!this.selection)return!1;this[-1]=this.selection.ends[-1][-1];this[1]=this.selection.ends[1][1];this.selection.remove();this.root.selectionChanged();return delete this.selection};e.replaceSelection=function(){var c=this.selection;c&&(this[-1]=c.ends[-1][-1],this[1]=c.ends[1][1],delete this.selection);
return c}}),ua=z(ca,function(e,m){e.init=function(){m.init.apply(this,arguments);this.jQwrap(this.jQ)};e.jQwrap=function(b){this.jQ=b.wrapAll('<span class="selection"></span>').parent()};e.adopt=function(){this.jQ.replaceWith(this.jQ=this.jQ.children());return m.adopt.apply(this,arguments)};e.clear=function(){this.jQ.replaceWith(this.jQ.children());return this};e.levelUp=function(){var b=this.ends[-1]=this.ends[1]=this.ends[1].parent.parent;this.clear().jQwrap(b.jQ);return this};e.extendDir=function(b){A(b);
this.ends[b]=this.ends[b][b];this.ends[b].jQ.insAtDirEnd(b,this.jQ);return this};e.extendLeft=function(){return this.extendDir(-1)};e.extendRight=function(){return this.extendDir(1)};e.retractDir=function(b){A(b);this.ends[-b].jQ.insDirOf(-b,this.jQ);this.ends[-b]=this.ends[-b][b]};e.retractRight=function(){return this.retractDir(1)};e.retractLeft=function(){return this.retractDir(-1)}});R.fn.mathquill=function(e,m){switch(e){case "redraw":return this.each(function(){var g=G(this).attr("mathquill-block-id");
(g=g&&y[g])&&function B(v){v.eachChild(B);v.redraw&&v.redraw()}(g)});case "revert":return this.each(function(){var g=G(this).attr("mathquill-block-id");(g=g&&y[g])&&g.revert&&g.revert()});case "latex":if(1<arguments.length)return this.each(function(){var g=G(this).attr("mathquill-block-id");(g=g&&y[g])&&g.renderLatex(m)});var b=G(this).attr("mathquill-block-id");return(b=b&&y[b])&&b.latex();case "text":return(b=(b=G(this).attr("mathquill-block-id"))&&y[b])&&b.text();case "html":return this.html().replace(/ ?hasCursor|hasCursor /,
"").replace(/ class=(""|(?= |>))/g,"").replace(/<span class="?cursor( blink)?"?><\/span>/i,"").replace(/<span class="?textarea"?><textarea><\/textarea><\/span>/i,"");case "write":if(1<arguments.length)return this.each(function(){var g=G(this).attr("mathquill-block-id");(g=(g=g&&y[g])&&g.cursor)&&g.writeLatex(m).parent.blur()});case "cmd":if(1<arguments.length)return this.each(function(){var g=G(this).attr("mathquill-block-id");if(g=(g=g&&y[g])&&g.cursor){var t=g.prepareWrite();/^\\[a-z]+$/i.test(m)?
g.insertCmd(m.slice(1),t):g.insertCh(m,t);g.hide().parent.blur()}});case "writesimpfunc":if(1<arguments.length)return this.each(function(){var g=G(this).attr("mathquill-block-id");if(g=(g=g&&y[g])&&g.cursor)g.selection?g.writeLatex(m+"{"+g.selection.latex()+"}").parent.blur():g.writeLatex(m+"{}").parent.blur(),g.moveLeft()});case "writefunc":if(1<arguments.length)return this.each(function(){var g=G(this).attr("mathquill-block-id");if(g=(g=g&&y[g])&&g.cursor)g.selection?g.writeLatex(m+"\\left("+g.selection.latex()+
"\\right)").parent.blur():g.writeLatex(m+"\\left(\\right)").parent.blur(),g.moveLeft()});case "movecursor":if(1<arguments.length)return this.each(function(){var g=G(this).attr("mathquill-block-id");if(g=(g=g&&y[g])&&g.cursor)"b"==m?g.backspace():(g.clearSelection().show(),"l"==m?g.moveLeft():"r"==m?g.moveRight():"u"==m?g.moveUp():"d"==m&&g.moveDown())});case "writefrac":if(1<arguments.length)return this.each(function(){var g=G(this).attr("mathquill-block-id");if(g=(g=g&&y[g])&&g.cursor)g.selection?
g.writeLatex("\\frac{"+g.selection.latex()+"}{}").parent.blur():(g.writeLatex("\\frac{}{}").parent.blur(),g.moveLeft()),g.moveLeft()});case "writeint":if(1<arguments.length)return this.each(function(){var g=G(this).attr("mathquill-block-id");g=(g=g&&y[g])&&g.cursor;if("["==m)var t="\\left[",v="\\right]";else"("==m?(t="\\left(",v="\\right)"):(t=m+"{",v="}");g&&(g.selection?g.selection.latex().match(/,/)?g.writeLatex(t+g.selection.latex()+v).parent.blur():g.writeLatex(t+g.selection.latex()+","+v).parent.blur():
(g.writeLatex(t+","+v).parent.blur(),g.moveLeft()),g.moveLeft())});case "writebracket":if(1<arguments.length)return this.each(function(){var g=G(this).attr("mathquill-block-id");g=(g=g&&y[g])&&g.cursor;if("["==m)var t="\\left[",v="\\right]";else"("==m?(t="\\left(",v="\\right)"):"|"==m&&(t="\\left|",v="\\right|");g&&(g.selection?g.writeLatex(t+g.selection.latex()+v).parent.blur():g.writeLatex(t+v).parent.blur(),g.moveLeft())});default:var c="textbox"===e,h=c||"editable"===e,n=c?T:H;return this.each(function(){M(G(this),
n(),c,h)})}};R(function(){R(".mathquill-editable:not(.mathquill-rendered-math)").mathquill("editable");R(".mathquill-textbox:not(.mathquill-rendered-math)").mathquill("textbox");R(".mathquill-embedded-latex").mathquill()})})();var mqarea,mqmousebase;
$(function(){$(window).load(function(){mqarea=$(".mathquill-editable");$(".mathquill-rendered-math").mathquill("redraw");mqarea.find("input,textarea").focus();$("input,textarea").attr("autocapitalize","off");$("#mqee td.mqeebtn").bind("mouseover mouseup",function(){$(this).hasClass("mqeeactive")||$(this).addClass("mqeehighlight")}).bind("mousedown",function(){$(this).addClass("mqeeclick")}).bind("mouseout",function(){$(this).removeClass("mqeehighlight");$(this).removeClass("mqeeclick")}).bind("mouseup",
function(){$(this).removeClass("mqeeclick")}).bind("click",mqeeinsert);$("#mqeeclosebutton").bind("click",hideee);$("#mqeetopbar").mousedown(function(k){k.preventDefault&&k.preventDefault();$("body").addClass("unselectable");mqmousebase={left:k.pageX,top:k.pageY};$("body").bind("mousemove",mqeemousemove);$("body").mouseup(function(f){var u=$("#mqee").offset();lasteepos.left=u.left;lasteepos.top=u.top;$("body").unbind("mousemove",mqeemousemove);$("body").removeClass("unselectable");$(this).unbind(f)})});
$("#mqee td.mqeebtn").bind("touchstart",function(k){k.preventDefault&&k.preventDefault();$(this).addClass("mqeeclick")}).bind("touchend",function(k){k.preventDefault&&k.preventDefault();$(this).delay(500).removeClass("mqeeclick")}).bind("touchend",mqeeinsert);$("#mqeeclosebutton").bind("touchend",function(k){k.preventDefault&&k.preventDefault();hideee()});$("#mqeetopbar").bind("touchstart",function(k){k.preventDefault&&k.preventDefault();k=k.originalEvent.changedTouches[0]||k.originalEvent.touches[0];
mqmousebase={left:k.pageX,top:k.pageY};$("body").addClass("unselectable");$("body").bind("touchmove",mqeetouchmove);$("body").bind("touchend",function(f){var u=$("#mqee").offset();lasteepos.left=u.left;lasteepos.top=u.top;$("body").unbind("touchmove",mqeetouchmove);$("body").removeClass("unselectable");$(this).unbind(f)})})});$(document).ready(function(){$(".tab_content").hide();$("ul.tabs li").click(function(){$("ul.tabs li").removeClass("active");$(this).addClass("active");$(".tab_content").hide();
var k=$(this).find("a").attr("href");$(k).show();return!1})})});function mqPrepTabs(k,f){$(".tab_content").hide();$("ul.tabs li").removeClass("active").each(function(u,A){if(0==u){$(A).addClass("active").show();var M=$(A).find("a").attr("href");$(M).show()}else 1==u?$(A).hide():2==u?"int"==f?$(A).show():$(A).hide():3==u?"ineq"==f?$(A).show():$(A).hide():1==k?$(A).show():$(A).hide()})}
function mqeemousemove(k){$("#mqee").css("left",k.pageX-mqmousebase.left+lasteepos.left).css("top",k.pageY-mqmousebase.top+lasteepos.top);k.preventDefault&&k.preventDefault();k.stopPropagation&&k.stopPropagation();return!1}
function mqeetouchmove(k){var f=k.originalEvent.changedTouches[0]||k.originalEvent.touches[0];$("#mqee").css("left",f.pageX-mqmousebase.left+lasteepos.left).css("top",f.pageY-mqmousebase.top+lasteepos.top);k.preventDefault&&k.preventDefault();k.stopPropagation&&k.stopPropagation();return!1}
function mqeeinsert(k){k.preventDefault&&k.preventDefault();k.stopPropagation&&k.stopPropagation();k=$(this).attr("btntext");var f=$(this).attr("btntype");k=k.replace("\\\\","\\");0==f?mqarea.mathquill("cmd",k).find("input,textarea").focus():1==f?mqarea.mathquill("write",k).find("input,textarea").focus():2==f?mqarea.mathquill("writesimpfunc",k).find("input,textarea").focus():3==f?mqarea.mathquill("writefunc",k).find("input,textarea").focus():4==f?mqarea.mathquill("writeint",k).find("input,textarea").focus():
5==f?mqarea.mathquill("movecursor",k).find("input,textarea").focus():6==f?mqarea.mathquill("writebracket",k).find("input,textarea").focus():7==f&&mqarea.mathquill("writefrac",k).find("input,textarea").focus();return!1}var mqeeddclosetimer=null,cureedd=null,lasteepos=null;
function showeedd(k,f,u){mqeeddclosetimer&&(window.clearTimeout(mqeeddclosetimer),mqeeddclosetimer=null);hideee();cureedd={id:k,type:f,extras:u};f=$("#mqeedd");k=$("#"+k);u=k.offset();u.left+=k.outerWidth();f.css("left",u.left+"px").css("top",u.top+"px").height(k.outerHeight()-2).show()}function updateeeddpos(){if(cureedd){var k=$("#mqeedd"),f=$("#"+cureedd.id),u=f.offset();u.left+=f.outerWidth();k.css("left",u.left+"px").css("top",u.top+"px").height(f.outerHeight()-2).show()}}
function hideeedd(){mqeeddclosetimer=setTimeout(function(){$("#mqeedd").hide()},250)}function mqeetoggleactive(k){for(var f=1;5>=f;f++)k==f?($("#mqeetab"+f).addClass("mqeeactive").removeClass("mqeehighlight"),document.getElementById("mqee"+f).style.display=""):(document.getElementById("mqee"+f).style.display="none",$("#mqeetab"+f).removeClass("mqeeactive"));mqeeactivetab=k;mqarea.find("input,textarea").focus()}
function showee(){mqPrepTabs(cureedd.type-3,cureedd.extras);var k=$("#mqee");if(lasteepos){var f=$(window).scrollTop()-lasteepos.scroll;lasteepos.top+=f;lasteepos.scroll=$(window).scrollTop()}else lasteepos={left:($(window).width()-k.outerWidth())/2,top:$(window).scrollTop()+((window.innerHeight?window.innerHeight:$(window).height())-k.outerHeight())/2,scroll:$(window).scrollTop()};k.css("left",lasteepos.left).css("top",lasteepos.top).show();mqarea.mathquill("latex",AMtoMQ($("#"+cureedd.id).val()));
mqarea.find("input,textarea").focus()}function hideee(){$("#mqee").hide()}function savemathquill(){var k=MQtoAM(mqarea.mathquill("latex"));$("#"+cureedd.id).val(k);""!=k&&$("#"+cureedd.id).siblings("input[value=spec]").prop("checked",!0);(k=$("#pbtn"+cureedd.id.substr(2)))&&k.trigger("click");hideee()}var eebasiccurel=null,eebasicinit=!1,eebasicselstore=null,eebasicclosetimer=0,ddbasicclosetimer=0,cureebasicdd=null,eebasictype=0;
function eebasicinsert(k){el=document.getElementById(eebasiccurel);if(el.setSelectionRange)var f=el.selectionEnd-el.selectionStart;else if(document.selection&&document.selection.createRange){el.focus();var u=eebasicselstore;f=u.text.length}posshift=0;"("==k?(insb="(",insa=")",posshift=1):"sym"==k.substr(0,3)&&(insb="",insa=k.substr(3));el.setSelectionRange?(k=el.selectionEnd+insa.length+insb.length,el.value=el.value.substring(0,el.selectionStart)+insb+el.value.substring(el.selectionStart,el.selectionEnd)+
insa+el.value.substring(el.selectionEnd,el.value.length),el.focus(),0==f&&0<posshift&&(k-=posshift),el.setSelectionRange(k,k)):document.selection&&document.selection.createRange&&(u.text=insb+u.text+insa,0==f&&0<posshift&&u.move("character",-1*posshift),u.select());eebasicselstore=null}function showeebasicselstore(k){null==eebasicselstore&&document.selection&&document.selection.createRange&&(document.getElementById(k).focus(),eebasicselstore=document.selection.createRange())}
function showeebasic(k){el=document.getElementById(k);if(!el.setSelectionRange&&document.selection&&document.selection.createRange)var f=eebasicselstore;var u=document.getElementById("eebasic");if(0==eebasicinit){els=u.getElementsByTagName("td");for(var A=0;A<els.length;A++)els[A].onmouseover=eebasiccellhighlight,els[A].onmouseout=eebasiccellunhighlight,els[A].onmousedown=eebasiccellhighlightdown,els[A].onmouseup=eebasiccellhighlight;eebasicinit=!0}1==eebasictype?(document.getElementById("eenumber").style.display=
"none",document.getElementById("eeinterval").style.display=""):(document.getElementById("eenumber").style.display="",document.getElementById("eeinterval").style.display="none");k!=eebasiccurel?(eebasiccurel=k,k=jQuery(el).offset(),u.style.top=k.top+el.offsetHeight+"px",u.style.display="block",u.style.left=u.offsetWidth<el.offsetWidth?k.left+el.offsetWidth+10-u.offsetWidth+"px":k.left+"px"):(u.style.display="none",eebasiccurel=null);unhideebasice(0);el.setSelectionRange?el.focus():document.selection&&
document.selection.createRange&&f.select()}function unhideebasice(k){eebasiccancelclosetimer()}function hideebasice(k){null!=eebasiccurel&&(eebasicclosetimer=window.setTimeout(reallyhideebasice,250))}function hideebasicedd(){ddbasicclosetimer=window.setTimeout(function(){cureebasicdd=null;document.getElementById("eebasicdd").style.display="none"},250)}function reallyhideebasice(){document.getElementById("eebasic").style.display="none";eebasiccurel=null}
function eebasiccancelclosetimer(){eebasicclosetimer&&(window.clearTimeout(eebasicclosetimer),eebasicclosetimer=null)}function eebasiccellhighlight(){this.style.background="#ccf"}function eebasiccellunhighlight(){this.style.background="#fff"}function eebasiccellhighlightdown(){this.style.background="#99f";null==eebasicselstore&&document.selection&&document.selection.createRange&&(document.getElementById(eebasiccurel).focus(),eebasicselstore=document.selection.createRange())}
function showeebasicdd(k,f){eebasictype=f;ddbasicclosetimer&&(window.clearTimeout(ddbasicclosetimer),ddbasicclosetimer=null);var u=document.getElementById("eebasicdd"),A=document.getElementById(k),M=jQuery(A).offset();u.style.left=M.left+A.offsetWidth+"px";u.style.top=M.top+"px";u.style.height=A.offsetHeight-2+"px";u.style.lineHeight=A.offsetHeight+"px";u.style.width="10px";u.style.display="block";cureebasicdd=k}
var AMtoMQ=function(){function k(l,r){return l.input>r.input?1:-1}function f(l,r){var q="\\"==l.charAt(r)&&"\\"!=l.charAt(r+1)&&" "!=l.charAt(r+1)?l.slice(r+1):l.slice(r);for(var x=0;x<q.length&&32>=q.charCodeAt(x);x+=1);return q.slice(x)}function u(l){var r=0,q="";var x=!0;for(var y=1;y<=l.length&&x;y++){x=l.slice(0,y);var w,P=r;if(0==P){P=-1;for(w=z.length;P+1<w;)r=P+w>>1,z[r]<x?P=r:w=r;r=w}else for(r=P;r<z.length&&z[r]<x;r++);if(r<z.length&&l.slice(0,z[r].length)==z[r]){q=z[r];var I=r;y=q.length}x=
r<z.length&&l.slice(0,z[r].length)>=z[r]}N=G;if(""!=q)return G=S[I].ttype,S[I];G=0;r=1;x=l.slice(0,1);for(I=!0;"0"<=x&&"9">=x&&r<=l.length;)x=l.slice(r,r+1),r++;if("."==x&&(x=l.slice(r,r+1),"0"<=x&&"9">=x))for(I=!1,r++;"0"<=x&&"9">=x&&r<=l.length;)x=l.slice(r,r+1),r++;I&&1<r||2<r?(x=l.slice(0,r-1),l="mn"):(x=l.slice(0,1),l=("A">x||"Z"<x)&&("a">x||"z"<x)?"mo":"mi");return"-"==x&&3==N?(G=3,{input:x,tag:l,output:x,ttype:1,func:!0,val:!0}):{input:x,tag:l,output:x,ttype:0,val:!0}}function A(l){if("{"==
l.charAt(0)&&"}"==l.charAt(l.length-1)){var r=0;var q=l.substr(1,5);if("\\left"==q)q=l.charAt(6),"("==q||"["==q||"{"==q?r=7:(q=l.substr(6,7),"\\lbrace"==q&&(r=13));else if(q=l.charAt(1),"("==q||"["==q)r=2;0<r&&(q=l.substr(l.length-8),"\\right)}"==q||"\\right]}"==q||"\\right.}"==q?(l="{"+l.substr(r),l=l.substr(0,l.length-8)+"}"):"\\rbrace}"==q&&(l="{"+l.substr(r),l=l.substr(0,l.length-14)+"}"))}return l}function M(l){pre="boolean"==typeof l.val&&l.val?"":"\\";return null==l.tex?pre+l.input:pre+l.tex}
function V(l){return null==l.tex?l.input:"\\"+l.tex}function R(l){var r="";l=f(l,0);var q=u(l);if(null==q||5==q.ttype&&0<Z)return[null,l];8==q.ttype&&(l=q.output+f(l,q.input.length),q=u(l));switch(q.ttype){case 7:case 0:return l=f(l,q.input.length),r=M(q),"\\"==r.charAt(0)||"mo"==q.tag?[r,l]:["{"+r+"}",l];case 4:Z++;l=f(l,q.input.length);r=ea(l,!0);Z--;if(r[0].match(/bmatrix/))return l=r[0].substring(0,r[0].length-7),[l,r[1]];l=0;if("\\right"==r[0].substr(0,6)){var x=r[0].charAt(6);")"==x||"]"==x||
"}"==x?l=6:"."==x?l=7:(x=r[0].substr(6,7),"\\rbrace"==x&&(l=13))}0<l?(r[0]=r[0].substr(l),l="boolean"==typeof q.invisible&&q.invisible?"{"+r[0]+"}":"{"+V(q)+r[0]+"}"):l="boolean"==typeof q.invisible&&q.invisible?"{\\left."+r[0]+"}":"{\\left"+V(q)+r[0]+"}";return[l,r[1]];case 10:return q!=da&&(l=f(l,q.input.length)),q="{"==l.charAt(0)?l.indexOf("}"):"("==l.charAt(0)?l.indexOf(")"):"["==l.charAt(0)?l.indexOf("]"):q==da?l.slice(1).indexOf('"')+1:0,-1==q&&(q=l.length),x=l.slice(1,q),r+="\\text{"+x+"}",
l=f(l,q+1),[r,l];case 1:l=f(l,q.input.length);r=R(l);if(null==r[0])return["{"+M(q)+"}",l];if("boolean"==typeof q.func&&q.func){x=l.charAt(0);if("^"==x||"_"==x||"/"==x||"|"==x||","==x||1==q.input.length&&q.input.match(/\w/)&&"("!=x)return["{"+M(q)+"}",l];l="{"+M(q)+"{"+r[0]+"}}";return[l,r[1]]}r[0]=A(r[0]);return"sqrt"==q.input?["\\sqrt{"+r[0]+"}",r[1]]:"abs"==q.input?["\\left|{"+r[0]+"}\\right|",r[1]]:"cancel"==q.input?["\\cancel{"+r[0]+"}",r[1]]:"undefined"!=typeof q.rewriteleftright?["{\\left"+
q.rewriteleftright[0]+r[0]+"\\right"+q.rewriteleftright[1]+"}",r[1]]:"boolean"==typeof q.acc&&q.acc?[M(q)+"{"+r[0]+"}",r[1]]:["{"+M(q)+"{"+r[0]+"}}",r[1]];case 2:l=f(l,q.input.length);r=R(l);if(null==r[0])return["{"+M(q)+"}",l];r[0]=A(r[0]);x=R(r[1]);if(null==x[0])return["{"+M(q)+"}",l];x[0]=A(x[0]);r="color"==q.input?"{\\color{"+r[0].replace(/[\{\}]/g,"")+"}"+x[0]+"}":"root"==q.input?"{\\sqrt["+r[0]+"]{"+x[0]+"}}":"{"+M(q)+"{"+r[0]+"}{"+x[0]+"}}";return[r,x[1]];case 3:return l=f(l,q.input.length),
[q.output,l];case 6:return l=f(l,q.input.length),["{\\quad\\text{"+q.input+"}\\quad}",l];case 9:return Z++,l=f(l,q.input.length),r=ea(l,!1),Z--,x=r[0].charAt(r[0].length-1),"|"==x?(l="{\\left|"+r[0]+"}",[l,r[1]]):["{\\mid}",l];default:return l=f(l,q.input.length),["{"+M(q)+"}",l]}}function ba(l){l=f(l,0);var r=u(l);var q=R(l);var x=q[0];l=q[1];var y=u(l);3==y.ttype&&"/"!=y.input&&(l=f(l,y.input.length),q=R(l),q[0]=null==q[0]?"{}":A(q[0]),l=q[1],"_"==y.input?(y=u(l),"^"==y.input?(l=f(l,y.input.length),
y=R(l),y[0]=A(y[0]),l=y[1],x="{"+x+("_{"+q[0]+"}"),x+="^{"+y[0]+"}",x+="}"):x+="_{"+q[0]+"}"):x=x+"^{"+q[0]+"}","undefined"!=typeof r.func&&r.func&&(y=u(l),3!=y.ttype&&5!=y.ttype&&(q=ba(l),x="{"+x+q[0]+"}",l=q[1])));return[x,l]}function ea(l,r){var q="",x=!1;do{l=f(l,0);var y=ba(l);var w=y[0];l=y[1];y=u(l);3==y.ttype&&"/"==y.input?(l=f(l,y.input.length),y=ba(l),y[0]=null==y[0]?"{}":A(y[0]),l=y[1],w=A(w),w="\\frac{"+w+"}",w+="{"+y[0]+"}",q+=w,y=u(l)):void 0!=w&&(q+=w)}while((5!=y.ttype&&(9!=y.ttype||
r)||0==Z)&&null!=y&&""!=y.output);if(5==y.ttype||9==y.ttype){var P=q.length;if(2<P&&"{"==q.charAt(0)&&0<q.indexOf(",")){var I=q.charAt(P-2);if(")"==I||"]"==I){var ca=q.charAt(6);if("("==ca&&")"==I&&"}"!=y.output||"["==ca&&"]"==I){x="\\begin{bmatrix}";var H=[];H.push(0);var la=!0,T=0,K=[[0]],a=0,ka=0;for(w=1;w<P-1;w++)q.charAt(w)==ca&&T++,q.charAt(w)==I&&(T--,0==T&&","==q.charAt(w+2)&&"{"==q.charAt(w+3)&&(H.push(w+2),a=w+2,K[a]=[w+2])),"["!=q.charAt(w)&&"("!=q.charAt(w)&&"{"!=q.charAt(w)||ka++,"]"!=
q.charAt(w)&&")"!=q.charAt(w)&&"}"!=q.charAt(w)||ka--,","==q.charAt(w)&&1==ka&&K[a].push(w);H.push(P);P=-1;if(0==T&&0<H.length)for(w=0;w<H.length-1;w++){0<w&&(x+="\\\\");if(0==w)if(1==K[H[w]].length)T=[q.substr(H[w]+7,H[w+1]-H[w]-15)];else{T=[q.substring(H[w]+7,K[H[w]][1])];for(I=2;I<K[H[w]].length;I++)T.push(q.substring(K[H[w]][I-1]+1,K[H[w]][I]));T.push(q.substring(K[H[w]][K[H[w]].length-1]+1,H[w+1]-8))}else if(1==K[H[w]].length)T=[q.substr(H[w]+8,H[w+1]-H[w]-16)];else{T=[q.substring(H[w]+8,K[H[w]][1])];
for(I=2;I<K[H[w]].length;I++)T.push(q.substring(K[H[w]][I-1]+1,K[H[w]][I]));T.push(q.substring(K[H[w]][K[H[w]].length-1]+1,H[w+1]-8))}0<P&&T.length!=P?la=!1:-1==P&&(P=T.length);x+=T.join("&")}la&&(q=x+"\\end{bmatrix}")}}}l=f(l,y.input.length);"boolean"==typeof y.invisible&&y.invisible?q+="\\right.":(w="\\right"+V(y),q+=w);x=!0}0<Z&&!x&&(q+="\\right.");return[q,l]}var da={input:'"',tag:"mtext",output:"mbox",tex:null,ttype:10},S=[{input:"alpha",tag:"mi",output:"\u03b1",tex:null,ttype:0},{input:"beta",
tag:"mi",output:"\u03b2",tex:null,ttype:0},{input:"chi",tag:"mi",output:"\u03c7",tex:null,ttype:0},{input:"delta",tag:"mi",output:"\u03b4",tex:null,ttype:0},{input:"Delta",tag:"mo",output:"\u0394",tex:null,ttype:0},{input:"epsi",tag:"mi",output:"\u03b5",tex:"epsilon",ttype:0},{input:"varepsilon",tag:"mi",output:"\u025b",tex:null,ttype:0},{input:"eta",tag:"mi",output:"\u03b7",tex:null,ttype:0},{input:"gamma",tag:"mi",output:"\u03b3",tex:null,ttype:0},{input:"Gamma",tag:"mo",output:"\u0393",tex:null,
ttype:0},{input:"iota",tag:"mi",output:"\u03b9",tex:null,ttype:0},{input:"kappa",tag:"mi",output:"\u03ba",tex:null,ttype:0},{input:"lambda",tag:"mi",output:"\u03bb",tex:null,ttype:0},{input:"Lambda",tag:"mo",output:"\u039b",tex:null,ttype:0},{input:"mu",tag:"mi",output:"\u03bc",tex:null,ttype:0},{input:"nu",tag:"mi",output:"\u03bd",tex:null,ttype:0},{input:"omega",tag:"mi",output:"\u03c9",tex:null,ttype:0},{input:"Omega",tag:"mo",output:"\u03a9",tex:null,ttype:0},{input:"phi",tag:"mi",output:"\u03c6",
tex:null,ttype:0},{input:"varphi",tag:"mi",output:"\u03d5",tex:null,ttype:0},{input:"Phi",tag:"mo",output:"\u03a6",tex:null,ttype:0},{input:"pi",tag:"mi",output:"\u03c0",tex:null,ttype:0},{input:"Pi",tag:"mo",output:"\u03a0",tex:null,ttype:0},{input:"psi",tag:"mi",output:"\u03c8",tex:null,ttype:0},{input:"Psi",tag:"mi",output:"\u03a8",tex:null,ttype:0},{input:"rho",tag:"mi",output:"\u03c1",tex:null,ttype:0},{input:"sigma",tag:"mi",output:"\u03c3",tex:null,ttype:0},{input:"Sigma",tag:"mo",output:"\u03a3",
tex:null,ttype:0},{input:"tau",tag:"mi",output:"\u03c4",tex:null,ttype:0},{input:"theta",tag:"mi",output:"\u03b8",tex:null,ttype:0},{input:"vartheta",tag:"mi",output:"\u03d1",tex:null,ttype:0},{input:"Theta",tag:"mo",output:"\u0398",tex:null,ttype:0},{input:"upsilon",tag:"mi",output:"\u03c5",tex:null,ttype:0},{input:"xi",tag:"mi",output:"\u03be",tex:null,ttype:0},{input:"Xi",tag:"mo",output:"\u039e",tex:null,ttype:0},{input:"zeta",tag:"mi",output:"\u03b6",tex:null,ttype:0},{input:"*",tag:"mo",output:"\u22c5",
tex:"cdot",ttype:0},{input:"-:",tag:"mo",output:"\u00f7",tex:"div",ttype:0},{input:"sum",tag:"mo",output:"\u2211",tex:null,ttype:7},{input:"nn",tag:"mo",output:"\u2229",tex:"cap",ttype:0},{input:"uu",tag:"mo",output:"\u222a",tex:"cup",ttype:0},{input:"U",tag:"mo",output:"\u222a",tex:"cup",ttype:0},{input:"xx",tex:"times",ttype:0},{input:"!=",tag:"mo",output:"\u2260",tex:"ne",ttype:0},{input:"lt",tag:"mo",output:"<",tex:null,ttype:0},{input:"gt",tag:"mo",output:">",tex:null,ttype:0},{input:"<=",tag:"mo",
output:"\u2264",tex:"le",ttype:0},{input:"lt=",tag:"mo",output:"\u2264",tex:"leq",ttype:0},{input:"gt=",tag:"mo",output:"\u2265",tex:"geq",ttype:0},{input:">=",tag:"mo",output:"\u2265",tex:"ge",ttype:0},{input:"geq",tag:"mo",output:"\u2265",tex:null,ttype:0},{input:"in",tag:"mo",output:"\u2208",tex:null,ttype:0},{input:"sub",tag:"mo",output:"\u2282",tex:"subset",ttype:0},{input:"sube",tag:"mo",output:"\u2286",tex:"subseteq",ttype:0},{input:"(",tag:"mo",output:"(",tex:null,ttype:4},{input:")",tag:"mo",
output:")",tex:null,ttype:5},{input:"[",tag:"mo",output:"[",tex:null,ttype:4},{input:"]",tag:"mo",output:"]",tex:null,ttype:5},{input:"{",tag:"mo",output:"{",tex:"{",ttype:4,notexcopy:!0},{input:"}",tag:"mo",output:"}",tex:"}",ttype:5,notexcopy:!0},{input:"|",tag:"mo",output:"|",tex:null,ttype:9},{input:"(:",tag:"mo",output:"\u2329",tex:"langle",ttype:4},{input:":)",tag:"mo",output:"\u232a",tex:"rangle",ttype:5},{input:"<<",tag:"mo",output:"\u2329",tex:"langle",ttype:4},{input:">>",tag:"mo",output:"\u232a",
tex:"rangle",ttype:5},{input:"int",tag:"mo",output:"\u222b",tex:null,ttype:0},{input:"+-",tag:"mo",output:"\u00b1",tex:"pm",ttype:0},{input:"O/",tag:"mo",output:"\u2205",tex:"emptyset",ttype:0},{input:"oo",tag:"mo",output:"\u221e",tex:"infty",ttype:0},{input:"rarr",tag:"mo",output:"\u2192",tex:"rightarrow",ttype:0},{input:"->",tag:"mo",output:"\u2192",tex:"to",ttype:0},{input:"RR",tag:"mo",output:"\u211d",tex:"mathbb{R}",ttype:0,notexcopy:!0},{input:"f",tag:"mi",output:"f",tex:null,ttype:1,func:!0,
val:!0},{input:"sin",tag:"mo",output:"sin",tex:null,ttype:1,func:!0},{input:"cos",tag:"mo",output:"cos",tex:null,ttype:1,func:!0},{input:"tan",tag:"mo",output:"tan",tex:null,ttype:1,func:!0},{input:"arcsin",tag:"mo",output:"arcsin",tex:null,ttype:1,func:!0},{input:"arccos",tag:"mo",output:"arccos",tex:null,ttype:1,func:!0},{input:"arctan",tag:"mo",output:"arctan",tex:null,ttype:1,func:!0},{input:"arcsec",tag:"mo",output:"arcsec",tex:null,ttype:1,func:!0},{input:"arccsc",tag:"mo",output:"arccsc",tex:null,
ttype:1,func:!0},{input:"arccot",tag:"mo",output:"arccot",tex:null,ttype:1,func:!0},{input:"sinh",tag:"mo",output:"sinh",tex:null,ttype:1,func:!0},{input:"cosh",tag:"mo",output:"cosh",tex:null,ttype:1,func:!0},{input:"tanh",tag:"mo",output:"tanh",tex:null,ttype:1,func:!0},{input:"cot",tag:"mo",output:"cot",tex:null,ttype:1,func:!0},{input:"coth",tag:"mo",output:"coth",tex:null,ttype:1,func:!0},{input:"sech",tag:"mo",output:"sech",tex:null,ttype:1,func:!0},{input:"csch",tag:"mo",output:"csch",tex:null,
ttype:1,func:!0},{input:"sec",tag:"mo",output:"sec",tex:null,ttype:1,func:!0},{input:"csc",tag:"mo",output:"csc",tex:null,ttype:1,func:!0},{input:"log",tag:"mo",output:"log",tex:null,ttype:1,func:!0},{input:"ln",tag:"mo",output:"ln",tex:null,ttype:1,func:!0},{input:"abs",tag:"mo",output:"abs",tex:null,ttype:1},{input:"Sin",tag:"mo",output:"sin",tex:null,ttype:1,func:!0},{input:"Cos",tag:"mo",output:"cos",tex:null,ttype:1,func:!0},{input:"Tan",tag:"mo",output:"tan",tex:null,ttype:1,func:!0},{input:"Arcsin",
tag:"mo",output:"arcsin",tex:null,ttype:1,func:!0},{input:"Arccos",tag:"mo",output:"arccos",tex:null,ttype:1,func:!0},{input:"Arctan",tag:"mo",output:"arctan",tex:null,ttype:1,func:!0},{input:"Sinh",tag:"mo",output:"sinh",tex:null,ttype:1,func:!0},{input:"Sosh",tag:"mo",output:"cosh",tex:null,ttype:1,func:!0},{input:"Tanh",tag:"mo",output:"tanh",tex:null,ttype:1,func:!0},{input:"Cot",tag:"mo",output:"cot",tex:null,ttype:1,func:!0},{input:"Sec",tag:"mo",output:"sec",tex:null,ttype:1,func:!0},{input:"Csc",
tag:"mo",output:"csc",tex:null,ttype:1,func:!0},{input:"Log",tag:"mo",output:"log",tex:null,ttype:1,func:!0},{input:"Ln",tag:"mo",output:"ln",tex:null,ttype:1,func:!0},{input:"Abs",tag:"mo",output:"abs",tex:null,ttype:1,func:!0},{input:"sqrt",tag:"msqrt",output:"sqrt",tex:null,ttype:1},{input:"root",tag:"mroot",output:"root",tex:null,ttype:2},{input:"frac",tag:"mfrac",output:"/",tex:null,ttype:2},{input:"/",tag:"mfrac",output:"/",tex:null,ttype:3},{input:"stackrel",tag:"mover",output:"stackrel",tex:null,
ttype:2},{input:"_",tag:"msub",output:"_",tex:null,ttype:3},{input:"^",tag:"msup",output:"^",tex:null,ttype:3},{input:"Sqrt",tag:"msqrt",output:"sqrt",tex:null,ttype:1},{input:"hat",tag:"mover",output:"^",tex:null,ttype:1,acc:!0},{input:"bar",tag:"mover",output:"\u00af",tex:"overline",ttype:1,acc:!0},{input:"vec",tag:"mover",output:"\u2192",tex:null,ttype:1,acc:!0},{input:"text",tag:"mtext",output:"text",tex:null,ttype:10},{input:"mbox",tag:"mtext",output:"mbox",tex:null,ttype:10},da],z=[],Z,N,G;
(function(){var l=[],r;for(r=0;r<S.length;r++)!S[r].tex||"boolean"==typeof S[r].notexcopy&&S[r].notexcopy||(l[l.length]={input:S[r].tex,tag:S[r].tag,output:S[r].output,ttype:S[r].ttype,acc:S[r].acc||!1});S=S.concat(l);S.sort(k);for(r=0;r<S.length;r++)z[r]=S[r].input})();return function(l){Z=0;l=l.replace(/(&nbsp;|\u00a0|&#160;)/g,"");l=l.replace(/^\s*<([^<].*?[^>])>\s*$/,"<<$1>>");l=l.replace(/&gt;/g,">");l=l.replace(/&lt;/g,"<");l=l.replace(/\s*\bor\b\s*/g,'" or "');l=l.replace(/all\s+real\s+numbers/g,
'"all real numbers"');l=l.replace(/(\)|\])\s*u\s*(\(|\[)/g,"$1U$2");l=l.replace(/\bDNE\b/gi,'"DNE"');return null==l.match(/\S/)?"":ea(l.replace(/^\s+/g,""),!1)[0]}}();
function MQtoAM(k,f){var u;k=k.replace(/\\:/g," ");k=k.replace(/\\operatorname{(\w+)}/g,"\\$1");if(f)k=k.replace(/\\Re/g,"RR");else{for(;-1!=(u=k.lastIndexOf("\\left|"));){var A=k.indexOf("\\right|",u+1);if(-1!=A){var M=k.substring(0,u).match(/(arcsinh|arccosh|arctanh|arcsech|arccsch|arccoth|arcsin|arccos|arctan|arcsec|arccsc|arccot|sinh|cosh|tanh|sech|csch|coth|ln|log|exp|sin|cos|tan|sec|csc|cot)(\^\d+)?$/);k=k.substring(0,A)+")"+(M?")":"")+k.substring(A+7);k=k.substring(0,u)+(M?"(":"")+"abs("+k.substring(u+
6)}else k=k.substring(0,u)+"|"+k.substring(u+6)}k=k.replace(/\\text{\s*or\s*}/g," or ");k=k.replace(/\\text{all\s+real\s+numbers}/g,"all real numbers");k=k.replace(/\\text{DNE}/g,"DNE");k=k.replace(/\\varnothing/g,"DNE");k=k.replace(/\\Re/g,"all real numbers")}k=k.replace(/\\begin{.?matrix}(.*?)\\end{.?matrix}/g,function(R,ba){return"[("+ba.replace(/\\\\/g,"),(").replace(/&/g,",")+")]"});k=k.replace(/\\le(?!f)/g,"<=");k=k.replace(/\\ge/g,">=");k=k.replace(/\\ne/g,"!=");k=k.replace(/\\pm/g,"+-");k=
k.replace(/\\approx/g,"~~");k=k.replace(/(\\arrow|\\rightarrow)/g,"rarr");k=k.replace(/\\cup/g,"U");k=k.replace(/\\times/g,"xx");k=k.replace(/\\left\\{/g,"lbrace").replace(/\\right\\}/g,"rbrace");k=k.replace(/\\left/g,"");k=k.replace(/\\right/g,"");k=k.replace(/\\langle/g,"<<");k=k.replace(/\\rangle/g,">>");k=k.replace(/\\cdot/g,"*");k=k.replace(/\\infty/g,"oo");k=k.replace(/\\nthroot/g,"root");k=k.replace(/\\mid/g,"|");k=k.replace(/\\/g,"");k=k.replace(/sqrt\[(.*?)\]/g,"root($1)");for(k=k.replace(/(\d)frac/g,
"$1 frac");-1!=(u=k.indexOf("frac{"));){A=1;for(M=u+5;0<A&&M<k.length-1;){M++;var V=k.charAt(M);"{"==V?A++:"}"==V&&A--}k=0==A?k.substring(0,u)+"("+k.substring(u+5,M)+")/"+k.substring(M+1):k.substring(0,u)+k.substring(u+4)}k=k.replace(/_(\d)(\d)/g,"_$1 $2");k=k.replace(/\^(\d)(\d)/g,"^$1 $2");k=k.replace(/_{([\d\.]+)}\^/g,"_$1^");k=k.replace(/_{([\d\.]+)}([^\^])/g,"_$1 $2");k=k.replace(/_{([\d\.]+)}$/g,"_$1");k=k.replace(/_{(\w+)}$/g,"_($1)");k=k.replace(/{/g,"(").replace(/}/g,")");k=k.replace(/lbrace/g,
"{").replace(/rbrace/g,"}");k=k.replace(/\(([\d\.]+)\)\/\(([\d\.]+)\)/g,"$1/$2");k=k.replace(/\/\(([\d\.]+)\)/g,"/$1");k=k.replace(/\(([\d\.]+)\)\//g,"$1/");k=k.replace(/\/\(([a-zA-Z])\)/g,"/$1");k=k.replace(/\(([a-zA-Z])\)\//g,"$1/");k=k.replace(/\^\(-1\)/g,"^-1");k=k.replace(/\^\((-?[\d\.]+)\)/g,"^$1");k=k.replace(/\/\(([a-zA-Z])\^([\d\.]+)\)/g,"/$1^$2");k=k.replace(/\(([a-zA-Z])\^([\d\.]+)\)\//g,"$1^$2/");return k=k.replace(/\+\-/g,"+ -")};
