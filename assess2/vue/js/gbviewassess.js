(function(){"use strict";var e={9528:function(e,s,t){t(9768);var r=t(5328),n=(t(9708),t(6760)),o=t(8752);const a={id:"app",role:"main"},i={key:0},l={key:1,class:"gbmainview"},d={class:"pii-full-name"},c=(0,n.QD)("br",null,null,-1),u={key:0},h=(0,n.QD)("br",null,null,-1),p={key:1},b=(0,n.QD)("br",null,null,-1),g={key:1},m=(0,n.QD)("br",null,null,-1),w={key:2},f=(0,n.QD)("br",null,null,-1),v={key:0},y={key:0},k=["value"],A={key:1},q={key:0},_={key:1},W={key:0},D={key:1},x={key:0},Q={for:"assessoverride"},$={key:1,class:"introtext"},O={key:2},z=["href"],I={key:1},P=["href"],T={key:3},E={key:4,class:"gbmainview"},S={key:0},C={key:0},j=["innerHTML"],F={key:1},M={key:0,class:"tabpanel"},V={style:{"list-style-type":"none",margin:"0","padding-left":"15px"}},G={key:2},U={class:"noticetext"},L={key:3},Y=["id"],N={class:"bigquestionwrap"},B={class:"headerpane"},H={key:0,class:"small subdued"},K={key:2},R={class:"scrollpane"},J=["disabled"],Z=["disabled"],X={key:2,class:"noticetext"},ee=["disabled"],se={class:"floatrightbutton"},te={key:0,class:"noticetext"},re=["disabled"],ne=(0,n.QD)("div",{style:{"margin-bottom":"100px"}},null,-1);function oe(e,s,t,oe,ae,ie){const le=(0,n.E1)("gb-assess-select"),de=(0,n.E1)("inter-question-text"),ce=(0,n.E1)("inter-question-text-list"),ue=(0,n.E1)("gb-question-select"),he=(0,n.E1)("gb-question"),pe=(0,n.E1)("gb-showwork"),be=(0,n.E1)("gb-score-details"),ge=(0,n.E1)("gb-feedback"),me=(0,n.E1)("summary-categories"),we=(0,n.E1)("gb-clear-attempts"),fe=(0,n.E1)("error-dialog"),ve=(0,n.E1)("confirm-dialog");return(0,n.Wz)(),(0,n.An)("div",a,[ie.assessInfoLoaded?((0,n.Wz)(),(0,n.An)("div",l,[(0,n.QD)("h1",null,(0,o.WA)(e.$t("gradebook.detail_title")),1),(0,n.QD)("h2",null,[(0,n.QD)("span",d,(0,o.WA)(ie.aData.userfullname),1)]),(0,n.QD)("h3",null,(0,o.WA)(ie.aData.name),1),(0,n.QD)("div",null,[(0,n.mY)((0,o.WA)(e.$t("gradebook.started"))+": "+(0,o.WA)(ie.startedString),1),c,(0,n.mY)(" "+(0,o.WA)(e.$t("gradebook.lastchange"))+": "+(0,o.WA)(ie.lastchangeString)+" ",1),ie.aData.timeontask>0?((0,n.Wz)(),(0,n.An)("span",u,[h,(0,n.mY)(" "+(0,o.WA)(e.$tc("gradebook.time_onscreen",ie.attemptCount))+": "+(0,o.WA)(ie.totalTimeOnTask),1)])):(0,n.g1)("",!0),ie.aData.hasOwnProperty("timelimit_ext")?((0,n.Wz)(),(0,n.An)("span",p,[b,(0,n.mY)(" "+(0,o.WA)(e.$t("gradebook."+(ie.aData.timelimit_ext>0?"has_timeext":"used_timeext"),{n:Math.abs(ie.aData.timelimit_ext)})),1)])):(0,n.g1)("",!0)]),(0,n.QD)("div",null,[(0,n.mY)((0,o.WA)(e.$t("gradebook.due"))+": "+(0,o.WA)(ie.aData.enddate_disp)+" ",1),ie.canEdit&&ie.aData.can_make_exception?((0,n.Wz)(),(0,n.An)("button",{key:0,type:"button",class:"slim",onClick:s[0]||(s[0]=(...e)=>ie.makeException&&ie.makeException(...e))},(0,o.WA)(ie.exceptionActionLabel),1)):(0,n.g1)("",!0),ie.aData.hasOwnProperty("original_enddate")?((0,n.Wz)(),(0,n.An)("span",g,[m,(0,n.mY)(" "+(0,o.WA)(e.$t("gradebook.originally_due"))+": "+(0,o.WA)(ie.aData.original_enddate_disp)+". "+(0,o.WA)(ie.extensionString),1)])):(0,n.g1)("",!0),ie.aData.hasOwnProperty("attemptext")?((0,n.Wz)(),(0,n.An)("span",w,[f,(0,n.mY)(" "+(0,o.WA)(e.$t("gradebook.attemptext",{n:ie.aData.attemptext})),1)])):(0,n.g1)("",!0)]),ie.canEdit&&ie.aData.latepass_status>1?((0,n.Wz)(),(0,n.An)("div",v,[(0,n.mY)((0,o.WA)(ie.latepassBlockMsg)+" ",1),ie.aData.latepass_status>6?((0,n.Wz)(),(0,n.An)("button",{key:0,type:"button",onClick:s[1]||(s[1]=(...e)=>ie.clearLPblock&&ie.clearLPblock(...e))},(0,o.WA)(e.$t("gradebook.clear_latepass_block")),1)):(0,n.g1)("",!0)])):(0,n.g1)("",!0),(0,n.QD)("div",null,[(0,n.QD)("strong",null,[(0,n.mY)((0,o.WA)(e.$t("gradebook.gb_score"))+": ",1),ie.aData.hasOwnProperty("scoreoverride")&&ie.canEdit?((0,n.Wz)(),(0,n.An)("span",y,[(0,n.QD)("input",{id:"assessoverride",size:"4",value:ie.aData.scoreoverride,onInput:s[2]||(s[2]=(...e)=>ie.setScoreOverride&&ie.setScoreOverride(...e)),onKeyup:s[3]||(s[3]=(0,r.jj)(((...e)=>ie.submitForm&&ie.submitForm(...e)),["enter"]))},null,40,k),(0,n.mY)("/"+(0,o.WA)(ie.aData.points_possible),1)])):((0,n.Wz)(),(0,n.An)("span",A,[ie.canEdit||"N/A"!==ie.aData.gbscore?((0,n.Wz)(),(0,n.An)("span",_,(0,o.WA)(ie.aData.gbscore)+"/"+(0,o.WA)(ie.aData.points_possible),1)):((0,n.Wz)(),(0,n.An)("span",q,(0,o.WA)(e.$t("gradebook.avail_"+ie.aData.scoresingb)),1))]))]),ie.aData.hasOwnProperty("scoreoverride")?((0,n.Wz)(),(0,n.An)("span",W," ("+(0,o.WA)(e.$t("gradebook.overridden"))+") ",1)):ie.canEdit?((0,n.Wz)(),(0,n.An)("span",D,[(0,n.QD)("button",{class:"slim",type:"button",onClick:s[4]||(s[4]=s=>e.showOverride=!e.showOverride)},(0,o.WA)(e.$t("gradebook.override")),1),e.showOverride?((0,n.Wz)(),(0,n.An)("span",x,[(0,n.QD)("label",Q,(0,o.WA)(e.$t("gradebook.override")),1),(0,n.mY)(": "),(0,n.wt)((0,n.QD)("input",{id:"assessoverride",size:"4","onUpdate:modelValue":s[5]||(s[5]=s=>e.assessOverride=s),onKeyup:s[6]||(s[6]=(0,r.jj)(((...e)=>ie.submitForm&&ie.submitForm(...e)),["enter"]))},null,544),[[r.Og,e.assessOverride]])])):(0,n.g1)("",!0)])):(0,n.g1)("",!0),ie.canEdit?((0,n.Wz)(),(0,n.An)("button",{key:2,type:"button",class:"slim",onClick:s[7]||(s[7]=e=>ie.clearAttempts("all"))},(0,o.WA)(e.$t("gradebook.clear_all")),1)):(0,n.g1)("",!0),ie.aData.hasOwnProperty("excused")?((0,n.Wz)(),(0,n.An)("button",{key:3,type:"button",class:"slim",onClick:s[8]||(s[8]=s=>e.showExcused=!e.showExcused)},(0,o.WA)(e.$t("gradebook."+(e.showExcused?"hide":"show")+"_excused")),1)):(0,n.g1)("",!0)]),e.showExcused?((0,n.Wz)(),(0,n.An)("div",$,[(0,n.mY)((0,o.WA)(e.$t("gradebook.excused_list"))+" ",1),(0,n.QD)("ul",null,[((0,n.Wz)(!0),(0,n.An)(n.ae,null,(0,n.mi)(ie.aData.excused,(e=>((0,n.Wz)(),(0,n.An)("li",{key:e},(0,o.WA)(e),1)))),128))])])):(0,n.g1)("",!0),ie.canEdit?((0,n.Wz)(),(0,n.An)("div",O,[ie.showViewAsStu?((0,n.Wz)(),(0,n.An)("a",{key:0,href:ie.viewAsStuUrl},(0,o.WA)(e.$t("gradebook.view_as_stu")),9,z)):(0,n.g1)("",!0),ie.showViewAsStu?((0,n.Wz)(),(0,n.An)("span",I,"|")):(0,n.g1)("",!0),(0,n.QD)("a",{href:ie.viewAsStuUrl+"#/print"},(0,o.WA)(e.$t("gradebook.print")),9,P)])):(0,n.g1)("",!0),0==ie.aData.assess_versions.length?((0,n.Wz)(),(0,n.An)("div",T,(0,o.WA)(e.$t("gradebook.no_versions")),1)):((0,n.Wz)(),(0,n.An)("div",E,[(0,n.QD)("div",null,[(0,n.mY)((0,o.WA)(ie.scoreCalc)+" ",1),(0,n.QD)("div",null,[ie.viewFull||"by_assessment"===ie.aData.submitby?((0,n.Wz)(),(0,n.Az)(le,{key:0,style:{display:"inline-block"},versions:ie.aData.assess_versions,submitby:ie.aData.submitby,haspractice:ie.aData.has_practice,selected:ie.curAver,onSetversion:ie.changeAssessVersion},null,8,["versions","submitby","haspractice","selected","onSetversion"])):(0,n.g1)("",!0),!ie.isByQuestion&&ie.canEdit&&-1!=ie.aData.assess_versions[ie.curAver].status?((0,n.Wz)(),(0,n.An)("button",{key:1,type:"button",onClick:s[9]||(s[9]=e=>ie.clearAttempts("attempt"))},(0,o.WA)(e.$t("gradebook.clear_attempt")),1)):(0,n.g1)("",!0)]),ie.isUnsubmitted?((0,n.Wz)(),(0,n.An)("div",S,[(0,n.mY)((0,o.WA)(e.$t("gradebook.unsubmitted"))+" ",1),(0,n.QD)("button",{type:"button",onClick:s[10]||(s[10]=(...e)=>ie.submitVersion&&ie.submitVersion(...e))},(0,o.WA)(e.$t("closed.submit_now")),1),!ie.canEdit&&ie.aData.can_use_latepass?((0,n.Wz)(),(0,n.An)("button",{key:0,type:"button",onClick:s[11]||(s[11]=(...e)=>ie.redeemLatePass&&ie.redeemLatePass(...e))},(0,o.WA)(e.$t("lti.use_latepass")),1)):(0,n.g1)("",!0)])):(0,n.g1)("",!0)]),""!==ie.curEndmsg?((0,n.Wz)(),(0,n.An)("div",C,[ie.viewFull?((0,n.Wz)(),(0,n.An)("button",{key:0,type:"button",onClick:s[12]||(s[12]=s=>e.showEndmsg=!e.showEndmsg)},(0,o.WA)(e.$t("gradebook."+(e.showEndmsg?"hide":"show")+"_endmsg")),1)):(0,n.g1)("",!0),e.showEndmsg||!ie.viewFull?((0,n.Wz)(),(0,n.An)("div",{key:1,class:"introtext",innerHTML:ie.curEndmsg},null,8,j)):(0,n.g1)("",!0)])):(0,n.g1)("",!0),ie.canEdit&&ie.viewFull?((0,n.Wz)(),(0,n.An)("div",F,[(0,n.QD)("button",{onClick:s[13]||(s[13]=s=>e.showFilters=!e.showFilters)},(0,o.WA)(e.$t("gradebook.filters")),1),e.showFilters?((0,n.Wz)(),(0,n.An)("div",M,[(0,n.QD)("p",null,(0,o.WA)(e.$t("gradebook.hide"))+":",1),(0,n.QD)("ul",V,[(0,n.QD)("li",null,[(0,n.QD)("label",null,[(0,n.wt)((0,n.QD)("input",{type:"checkbox","onUpdate:modelValue":s[14]||(s[14]=s=>e.hideUnanswered=s)},null,512),[[r.cV,e.hideUnanswered]]),(0,n.mY)(" "+(0,o.WA)(e.$t("gradebook.hide_unans")),1)])]),(0,n.QD)("li",null,[(0,n.QD)("label",null,[(0,n.wt)((0,n.QD)("input",{type:"checkbox","onUpdate:modelValue":s[15]||(s[15]=s=>e.hideZero=s)},null,512),[[r.cV,e.hideZero]]),(0,n.mY)(" "+(0,o.WA)(e.$t("gradebook.hide_zero")),1)])]),(0,n.QD)("li",null,[(0,n.QD)("label",null,[(0,n.wt)((0,n.QD)("input",{type:"checkbox","onUpdate:modelValue":s[16]||(s[16]=s=>e.hideNonzero=s)},null,512),[[r.cV,e.hideNonzero]]),(0,n.mY)(" "+(0,o.WA)(e.$t("gradebook.hide_nonzero")),1)])]),(0,n.QD)("li",null,[(0,n.QD)("label",null,[(0,n.wt)((0,n.QD)("input",{type:"checkbox","onUpdate:modelValue":s[17]||(s[17]=s=>e.hidePerfect=s)},null,512),[[r.cV,e.hidePerfect]]),(0,n.mY)(" "+(0,o.WA)(e.$t("gradebook.hide_perfect")),1)])]),(0,n.QD)("li",null,[(0,n.QD)("label",null,[(0,n.wt)((0,n.QD)("input",{type:"checkbox","onUpdate:modelValue":s[18]||(s[18]=s=>e.hide100=s)},null,512),[[r.cV,e.hide100]]),(0,n.mY)(" "+(0,o.WA)(e.$t("gradebook.hide_100")),1)])]),(0,n.QD)("li",null,[(0,n.QD)("label",null,[(0,n.wt)((0,n.QD)("input",{type:"checkbox","onUpdate:modelValue":s[19]||(s[19]=s=>e.hideFeedback=s)},null,512),[[r.cV,e.hideFeedback]]),(0,n.mY)(" "+(0,o.WA)(e.$t("gradebook.hide_fb")),1)])]),(0,n.QD)("li",null,[(0,n.QD)("label",null,[(0,n.wt)((0,n.QD)("input",{type:"checkbox","onUpdate:modelValue":s[20]||(s[20]=s=>e.hideNowork=s)},null,512),[[r.cV,e.hideNowork]]),(0,n.mY)(" "+(0,o.WA)(e.$t("gradebook.hide_nowork")),1)])]),(0,n.QD)("li",null,[(0,n.QD)("label",null,[(0,n.wt)((0,n.QD)("input",{type:"checkbox","onUpdate:modelValue":s[21]||(s[21]=s=>e.hidetexts=s),onChange:s[22]||(s[22]=(...e)=>ie.loadTexts&&ie.loadTexts(...e))},null,544),[[r.cV,e.hidetexts]]),(0,n.mY)(" "+(0,o.WA)(e.$t("gradebook.introtexts")),1)])])]),(0,n.QD)("p",null,[(0,n.QD)("button",{type:"button",onClick:s[23]||(s[23]=(...e)=>ie.showAllAns&&ie.showAllAns(...e))},(0,o.WA)(e.$t("gradebook.show_all_ans")),1),(0,n.QD)("button",{type:"button",onClick:s[24]||(s[24]=s=>e.showAllWork=!e.showAllWork)},(0,o.WA)(e.$t("gradebook.show_all_work")),1),(0,n.QD)("button",{type:"button",onClick:s[25]||(s[25]=(...e)=>ie.previewFiles&&ie.previewFiles(...e))},(0,o.WA)(e.$t("gradebook.preview_files")),1),(0,n.QD)("button",{type:"button",onClick:s[26]||(s[26]=(...e)=>ie.toggleFloatingScoreboxes&&ie.toggleFloatingScoreboxes(...e))},(0,o.WA)(e.$t("gradebook.floating_scoreboxes")),1)])])):(0,n.g1)("",!0)])):ie.viewFull?((0,n.Wz)(),(0,n.An)("div",G,[(0,n.QD)("button",{onClick:s[27]||(s[27]=s=>{e.hidetexts=!e.hidetexts,ie.loadTexts()})},(0,o.WA)(e.$t(e.hidetexts?"print.show_text":"print.hide_text")),1),(0,n.QD)("p",U,(0,o.WA)(e.$t("gradebook.no_edit")),1)])):(0,n.g1)("",!0),ie.viewFull?((0,n.Wz)(),(0,n.An)("div",L,[ie.aData.hasOwnProperty("intro")&&""!==ie.aData.intro?(0,n.wt)(((0,n.Wz)(),(0,n.Az)(de,{key:0,active:!e.hidetexts,textobj:{html:ie.aData.intro},class:"questionpane introtext"},null,8,["active","textobj"])),[[r.Ub,!e.hidetexts]]):(0,n.g1)("",!0),((0,n.Wz)(!0),(0,n.An)(n.ae,null,(0,n.mi)(ie.curQuestions,((s,t)=>((0,n.Wz)(),(0,n.An)("div",{key:t,id:"qwrap"+(t+1)},[(0,n.wt)(((0,n.Wz)(),(0,n.Az)(ce,{pos:"beforeexact",qn:t,key:"iqt"+t,active:!e.hidetexts,lastq:ie.lastQ,textlist:ie.textList},null,8,["qn","active","lastq","textlist"])),[[r.Ub,!e.hidetexts]]),(0,n.QD)("div",N,[(0,n.QD)("div",B,[(0,n.QD)("strong",null,(0,o.WA)(e.$tc("question_n",t+1))+". ",1),s[ie.curQver[t]].extracredit?((0,n.Wz)(),(0,n.An)("em",H,(0,o.WA)(e.$t("extracredit")),1)):(0,n.g1)("",!0),"by_question"===ie.aData.submitby?((0,n.Wz)(),(0,n.Az)(ue,{key:1,versions:s,selected:ie.curQver[t],qn:t,onSetversion:ie.changeQuestionVersion,class:"med-left"},null,8,["versions","selected","qn","onSetversion"])):s[ie.curQver[t]].hasOwnProperty("gbscore")&&"N/A"!==s[ie.curQver[t]].gbscore?((0,n.Wz)(),(0,n.An)("span",K,[(0,n.mY)((0,o.WA)(e.$t("gradebook.score"))+": ",1),(0,n.QD)("strong",null,(0,o.WA)(s[ie.curQver[t]].gbscore)+"/"+(0,o.WA)(s[ie.curQver[t]].points_possible),1)])):(0,n.g1)("",!0)]),(0,n.QD)("div",R,[(0,n.K2)(he,{class:(0,o.WN)({inactive:!ie.showQuestion[t]}),qdata:s[ie.curQver[t]],qn:t,disabled:!ie.canEdit},null,8,["class","qdata","qn","disabled"]),(0,n.K2)(pe,{work:s[ie.curQver[t]].work,worktime:s[ie.curQver[t]].worktime,showall:e.showAllWork},null,8,["work","worktime","showall"])]),(0,n.K2)(be,{showfull:ie.showQuestion[t],canedit:ie.canEdit,qdata:s[ie.curQver[t]],qn:t,onSubmitform:ie.submitForm},null,8,["showfull","canedit","qdata","qn","onSubmitform"])])],8,Y)))),128)),(0,n.wt)((0,n.K2)(ce,{pos:"after",qn:ie.lastQ,active:!e.hidetexts,lastq:ie.lastQ,textlist:ie.textList},null,8,["qn","active","lastq","textlist"]),[[r.Ub,!e.hidetexts]])])):(0,n.g1)("",!0),(0,n.K2)(ge,{qn:"gen",username:ie.aData.userfullname,show:ie.viewFull&&(ie.canEdit||""!==ie.assessFeedback),canedit:ie.canEdit,useeditor:ie.useEditor,value:ie.assessFeedback,onUpdate:ie.updateFeedback},null,8,["username","show","canedit","useeditor","value","onUpdate"]),(0,n.QD)("div",null,[ie.canEdit?((0,n.Wz)(),(0,n.An)("button",{key:0,type:"button",disabled:!ie.canSubmit,class:"primary",onClick:s[28]||(s[28]=e=>ie.submitChanges(!0))},(0,o.WA)(e.$t("gradebook.save")),9,J)):(0,n.g1)("",!0),ie.canEdit&&ie.aData.nextstu?((0,n.Wz)(),(0,n.An)("button",{key:1,type:"button",disabled:!ie.canSubmit,class:"primary",onClick:s[29]||(s[29]=e=>ie.submitChanges(!1,!0))},(0,o.WA)(e.$t("gradebook.savenext")),9,Z)):(0,n.g1)("",!0),""!==ie.savedMsg?((0,n.Wz)(),(0,n.An)("span",X,(0,o.WA)(ie.savedMsg),1)):(0,n.g1)("",!0),(0,n.QD)("button",{type:"button",class:"secondary",disabled:!ie.canSubmit,onClick:s[30]||(s[30]=(...e)=>ie.exit&&ie.exit(...e))},(0,o.WA)(e.$t("gradebook.return")),9,ee)]),(0,n.QD)("div",se,[""!==ie.savedMsg?((0,n.Wz)(),(0,n.An)("div",te,(0,o.WA)(ie.savedMsg),1)):(0,n.g1)("",!0),ie.canEdit?((0,n.Wz)(),(0,n.An)("button",{key:1,type:"button",disabled:!ie.canSubmit,class:"primary",onClick:s[31]||(s[31]=(...e)=>ie.submitChanges&&ie.submitChanges(...e))},(0,o.WA)(e.$t("gradebook.save")),9,re)):(0,n.g1)("",!0)]),ie.showCategories?((0,n.Wz)(),(0,n.Az)(me,{key:4,data:ie.curQuestionVers},null,8,["data"])):(0,n.g1)("",!0),(0,n.K2)(we),ne]))])):((0,n.Wz)(),(0,n.An)("div",i,(0,o.WA)(e.$t("loading")),1)),ie.hasError?((0,n.Wz)(),(0,n.Az)(fe,{key:2,errormsg:ie.errorMsg,onClearerror:ie.clearError},null,8,["errormsg","onClearerror"])):(0,n.g1)("",!0),null!==ie.confirmObj?((0,n.Wz)(),(0,n.Az)(ve,{key:3,data:ie.confirmObj,onClose:ie.closeConfirm},null,8,["data","onClose"])):(0,n.g1)("",!0)])}t(4004);var ae=t(8568);t(3248);function ie(e,s){let t=-1;const r=e.interquestion_text,n=[];for(const o in s)if(s[o].hasOwnProperty("text")){const e=s[o].text;if(JSON.stringify(e)===JSON.stringify(t))for(let s=0;s<e.length;s++)n[n.length-1-s].displayUntil=o;else{for(let s=0;s<e.length;s++)n.push(Object.assign({orig:1e5},r[e[s]])),n[n.length-1].displayBefore=o,n[n.length-1].displayUntil=o;t=e.slice()}}else t=-1;for(const o in r)r[o].hasOwnProperty("displayBefore")&&n.push(Object.assign({orig:o},r[o])),r[o].hasOwnProperty("atend")&&(n.push(Object.assign({orig:o},r[o])),n[n.length-1].displayBefore=s.length,n[n.length-1].displayUntil=s.length);n.length>0&&(n.sort((function(e,s){return parseInt(e.displayBefore)===parseInt(s.displayBefore)?e.orig-s.orig:e.displayBefore-s.displayBefore})),e.interquestion_text=n)}const le=(0,ae.cB)({assessInfo:null,APIbase:null,aid:null,cid:null,uid:null,stu:0,queryString:"",exitUrl:"",inTransit:!1,saving:"",errorMsg:null,confirmObj:null,curAver:0,ispractice:!1,curQver:[],orig_submitby:null,scoreOverrides:{},feedbacks:{},clearAttempts:{show:!1,type:"",qn:0}}),de={loadGbAssessData(e,s){le.inTransit?window.setTimeout((()=>this.loadGbAssessData(e,s)),20):null===le.assessInfo&&window.gbAssessData?(le.assessInfo=window.gbAssessData,"undefined"!==typeof e&&e()):(le.inTransit=!0,le.errorMsg=null,window.$.ajax({url:le.APIbase+"gbloadassess.php"+le.queryString,dataType:"json",xhrFields:{withCredentials:!0},crossDomain:!0}).done((s=>{s.hasOwnProperty("error")?this.handleError(s.error):(le.assessInfo=s,le.curAver=s.scored_version,this.setQverAsScored(s.scored_version),"undefined"!==typeof e&&e(),(0,n.o$)((()=>{if(window.initAnswerboxHighlights(),window.location.hash){const e=document.getElementById(window.location.hash.substring(1).replace(/\//,""));e&&e.scrollIntoView()}})))})).fail(((e,s,t)=>{this.handleError("parsererror"===s?"parseerror":"noserver")})).always((e=>{le.inTransit=!1})))},loadGbAssessVersion(e,s){if(le.inTransit)return void window.setTimeout((()=>this.loadGbAssessVersion(e,s)),20);const t=le.queryString+"&ver="+e+"&practice="+(s?1:0);le.inTransit=!0,le.errorMsg=null,window.$.ajax({url:le.APIbase+"gbloadassessver.php"+t,dataType:"json",xhrFields:{withCredentials:!0},crossDomain:!0}).done((t=>{t.hasOwnProperty("error")?this.handleError(t.error):(s&&(e=le.assessInfo.assess_versions.length-1),delete le.assessInfo.interquestion_text,delete le.assessInfo.intro,le.assessInfo.assess_versions[e]=t,le.curAver=e,this.setQverAsScored(e),le.ispractice=s,s?(null===le.orig_submitby&&(le.orig_submitby=le.assessInfo.submitby),le.assessInfo.submitby="by_question"):null!==le.orig_submitby&&(le.assessInfo.submitby=le.orig_submitby),(0,n.o$)((()=>{window.initAnswerboxHighlights()})))})).fail(((e,s,t)=>{this.handleError("parsererror"===s?"parseerror":"noserver")})).always((e=>{le.inTransit=!1}))},loadGbTexts(e){le.inTransit?window.setTimeout((()=>this.loadGbTexts(e)),20):(le.inTransit=!0,le.errorMsg=null,window.$.ajax({url:le.APIbase+"gbloadtexts.php"+le.queryString,dataType:"json",xhrFields:{withCredentials:!0},crossDomain:!0}).done((s=>{if(s.hasOwnProperty("error"))return void this.handleError(s.error);const t=[];for(let e=0;e<le.assessInfo.assess_versions[le.curAver].questions.length;e++)t[e]={},le.assessInfo.assess_versions[le.curAver].questions[e][le.curQver[e]].hasOwnProperty("text")&&(t[e]={text:le.assessInfo.assess_versions[le.curAver].questions[e][le.curQver[e]].text.slice()});s.hasOwnProperty("interquestion_text")&&ie(s,t),le.assessInfo.intro=s.intro,le.assessInfo.interquestion_text=s.interquestion_text,e&&(0,n.o$)((()=>{e()}))})).fail(((e,s,t)=>{this.handleError("parsererror"===s?"parseerror":"noserver")})).always((e=>{le.inTransit=!1})))},loadGbQuestionVersion(e,s,t,r){if(le.inTransit)return void window.setTimeout((()=>this.loadGbQuestionVersion(e,s,t,r)),20);let o=le.queryString+"&ver="+s+"&qn="+e;o+="&practice="+(le.ispractice?1:0),null===le.assessInfo.assess_versions[le.curAver].questions[e][s].html||!0===t?(le.inTransit=!0,le.errorMsg=null,window.$.ajax({url:le.APIbase+"gbloadquestionver.php"+o,dataType:"json",xhrFields:{withCredentials:!0},crossDomain:!0}).done((t=>{t.hasOwnProperty("error")?this.handleError(t.error):(r&&r(),le.assessInfo.assess_versions[le.curAver].questions[e][s]=Object.assign(le.assessInfo.assess_versions[le.curAver].questions[e][s],t),le.curQver[e]=s,(0,n.o$)((()=>{window.initAnswerboxHighlights()})))})).fail(((e,s,t)=>{this.handleError("parsererror"===s?"parseerror":"noserver")})).always((e=>{le.inTransit=!1}))):le.curQver[e]=s},saveChanges(e,s){if(le.inTransit)return void window.setTimeout((()=>this.saveChanges(e)),20);let t="";if(s&&(t="gbviewassess.php?cid="+le.cid+"&aid="+le.aid+"&uid="+le.assessInfo.nextstu,window.location.search.match(/from=/)&&(t+="&from="+window.location.search.replace(/^.*from=(\w+).*$/,"$1"))),0===Object.keys(le.scoreOverrides).length&&0===Object.keys(le.feedbacks).length)return le.saving="saved",void(e?window.location=window.exiturl:s&&(window.location=t));const r=le.queryString;le.inTransit=!0,le.saving="saving",le.errorMsg=null;const n=new FormData;n.append("scores",JSON.stringify(le.scoreOverrides)),n.append("feedback",JSON.stringify(le.feedbacks)),n.append("practice",le.ispractice?1:0),window.$.ajax({url:le.APIbase+"gbsave.php"+r,type:"POST",dataType:"json",data:n,processData:!1,contentType:!1,xhrFields:{withCredentials:!0},crossDomain:!0}).done((r=>{if(r.hasOwnProperty("error"))this.handleError(r.error);else if(le.saving="saved",(e||s)&&(le.scoreOverrides={},le.feedbacks={}),e)window.location=window.exiturl;else if(s)window.location=t;else{for(const e in le.scoreOverrides){if("gen"===e){""===le.scoreOverrides.gen?delete le.assessInfo.scoreoverride:(le.assessInfo.gbscore=le.scoreOverrides.gen,le.assessInfo.scoreoverride=le.scoreOverrides.gen);continue}const s=e.split(/-/),t=le.assessInfo.assess_versions[s[0]].questions[s[1]][s[2]];t.hasOwnProperty("scoreoverride")&&""===le.scoreOverrides[e]&&("number"===typeof t.scoreoverride?delete t.scoreoverride:delete t.scoreoverride[s[3]]),le.scoreOverrides.hasOwnProperty(e)&&""!==le.scoreOverrides[e]&&(t.hasOwnProperty("scoreoverride")||(le.assessInfo.assess_versions[s[0]].questions[s[1]][s[2]].scoreoverride={}),le.assessInfo.assess_versions[s[0]].questions[s[1]][s[2]].scoreoverride[s[3]]=le.scoreOverrides[e])}for(const e in r.newscores){const s=e.split(/-/);le.assessInfo.assess_versions[s[0]].questions[s[1]][s[2]].score=r.newscores[e][0];for(let t=0;t<r.newscores[e][1].length;t++)le.assessInfo.assess_versions[s[0]].questions[s[1]][s[2]].parts[t]=r.newscores[e][1][t]}for(const e in le.feedbacks){const s=e.split(/-/);"g"===s[1]?le.assessInfo.assess_versions[s[0]].feedback=le.feedbacks[e]:le.assessInfo.assess_versions[s[0]].questions[s[1]][s[2]].feedback=le.feedbacks[e]}le.assessInfo.gbscore=r.gbscore,le.assessInfo.scored_version=r.scored_version;for(let e=0;e<r.assess_info.length;e++){le.assessInfo.assess_versions[e].score=r.assess_info[e].score;for(let s=0;s<r.assess_info[e].scoredvers.length;s++){if(!le.assessInfo.assess_versions[e].hasOwnProperty("questions"))continue;const t=le.assessInfo.assess_versions[e].questions[s];for(let n=0;n<t.length;n++)n===r.assess_info[e].scoredvers[s]?t[n].scored=!0:t[n].scored&&delete t[n].scored}}le.scoreOverrides={},le.feedbacks={}}})).fail((e=>{le.saving="save_fail"})).always((e=>{le.inTransit=!1}))},clearLPblock(){le.clearAttempts.type="practiceview",this.clearAttempt(!0)},clearAttempt(e){const s={type:le.clearAttempts.type,keepver:e};"attempt"!==le.clearAttempts.type&&"qver"!==le.clearAttempts.type||(s.aver=le.curAver),"qver"===le.clearAttempts.type&&(s.qn=le.clearAttempts.qn,s.qver=le.curQver[s.qn]),window.$.ajax({url:le.APIbase+"gbclearattempt.php"+le.queryString,type:"POST",dataType:"json",data:s,xhrFields:{withCredentials:!0},crossDomain:!0}).done((e=>{if(e.hasOwnProperty("error"))this.handleError(e.error);else if("all"===le.clearAttempts.type&&0===s.keepver)window.location=window.exiturl;else if("all"===le.clearAttempts.type)de.loadGbAssessData();else if("practiceview"===le.clearAttempts.type)le.assessInfo.latepass_status=s.latepass_status;else if(le.assessInfo.gbscore=e.gbscore,le.assessInfo.scored_version=e.scored_version,"attempt"===le.clearAttempts.type){const t=new RegExp("^"+s.aver+"-");for(const e in le.scoreOverrides)e.match(t)&&delete le.scoreOverrides[e];e.hasOwnProperty("newver")?le.assessInfo.assess_versions[s.aver]=e.newver:(le.assessInfo.assess_versions.splice(s.aver,1),de.loadGbAssessVersion(e.scored_version,!1)),s.aver>0&&(le.curAver=s.aver-1)}else if("qver"===le.clearAttempts.type){const t=new RegExp("^"+s.aver+"-"+s.qn+"-"+s.qver+"-");for(const e in le.scoreOverrides)e.match(t)&&delete le.scoreOverrides[e];le.assessInfo.assess_versions[s.aver].score=e.assessinfo.score,le.assessInfo.assess_versions[s.aver].status=e.assessinfo.status,e.hasOwnProperty("newver")?(le.assessInfo.assess_versions[s.aver].questions[s.qn][s.qver]=e.newver,le.assessInfo.assess_versions[s.aver].questions[s.qn][e.qinfo.scored_version].scored=!0):de.loadGbQuestionVersion(s.qn,e.qinfo.scored_version,!0,(()=>{le.assessInfo.assess_versions[s.aver].questions[s.qn].splice(s.qver,1),le.assessInfo.assess_versions[s.aver].questions[s.qn][e.qinfo.scored_version].scored=!0}))}})).fail((e=>{this.handleError("send_fail")})).always((e=>{le.inTransit=!1,le.clearAttempts.show=!1}))},endAssess(){le.inTransit?window.setTimeout((()=>this.endAssess()),20):(le.inTransit=!0,le.errorMsg=null,window.$.ajax({url:le.APIbase+"endassess.php"+le.queryString,dataType:"json",xhrFields:{withCredentials:!0},crossDomain:!0}).done((e=>{e.hasOwnProperty("error")?this.handleError(e.error):(le.assessInfo=null,de.loadGbAssessData())})).fail(((e,s,t)=>{this.handleError("parsererror"===s?"parseerror":"noserver")})).always((e=>{le.inTransit=!1})))},setQverAsScored(e){const s=le.assessInfo.assess_versions[e].questions;let t;e:for(let r=0;r<s.length;r++)for(t=0;t<s[r].length;t++){if(s[r][t].hasOwnProperty("scored")){le.curQver[r]=t;continue e}le.curQver[r]=s[r].length-1}},setScoreOverride(e,s,t){const r=le.curAver,n=le.curQver[e],o=le.assessInfo.assess_versions[r].questions[e][n],a=r+"-"+e+"-"+n+"-"+s;if(""===t)le.scoreOverrides[a]="";else{let e=!0;o.singlescore?e=Math.abs(t-o.score/o.points_possible)>.001:o.parts[s]&&(e=Math.abs(t-o.parts[s].score/o.parts[s].points_possible)>.001),o.parts[s]&&o.parts[s].try>0&&(""===t||!e)?delete le.scoreOverrides[a]:le.scoreOverrides[a]=Math.round(1e4*t)/1e4}le.saving=""},setFeedback(e,s){const t=le.curAver;let r=t,n=!0;if(null===e)r+="-g",s===le.assessInfo.assess_versions[le.curAver].feedback&&(n=!1);else{const t=le.curQver[e];r+="-"+e+"-"+t,s===le.assessInfo.assess_versions[le.curAver].questions[e][t].feedback&&(n=!1)}n?le.feedbacks[r]=s:delete le.feedbacks[r],le.saving=""},handleError(e){le.errorMsg=e}},ce={class:"questionwrap questionpane"},ue=["innerHTML","id"];function he(e,s,t,r,o,a){return(0,n.Wz)(),(0,n.An)("div",ce,[(0,n.QD)("div",{innerHTML:t.qdata.html,class:"question",id:"questionwrap"+t.qn,ref:"thisqwrap"},null,8,ue)])}var pe={name:"GbQuestion",props:["qdata","qn","disabled"],data:function(){return{rendered:!1}},methods:{renderInit(){this.rendered||(this.disabled&&window.$(this.$refs.thisqwrap).find("input,select,textarea").each((function(e,s){s.name.match(/^(qn|tc|qs)/)&&(s.disabled=!0)})),setTimeout(window.drawPics,100),window.rendermathnode(this.$refs.thisqwrap),window.initSageCell(this.$refs.thisqwrap),window.initlinkmarkup(this.$refs.thisqwrap),window.imathasAssess.init(this.qdata.jsparams,!0,this.$refs.thisqwrap),this.rendered=!0)}},mounted(){this.renderInit()},watch:{qdata:function(e,s){null!==e&&(this.rendered=!1,this.$nextTick(this.renderInit))}}},be=t(8152);const ge=(0,be.c)(pe,[["render",he]]);var me=ge;const we={key:0,class:"questionpane viewworkwrap"},fe={key:0,class:"small"},ve=["innerHTML"];function ye(e,s,t,a,i,l){return t.work?((0,n.Wz)(),(0,n.An)("div",we,[(0,n.QD)("div",null,[(0,n.QD)("button",{type:"button",class:"slim",onClick:s[0]||(s[0]=s=>e.show=!e.show)},(0,o.WA)(l.btnLabel),1),e.show&&"0"!==t.worktime?((0,n.Wz)(),(0,n.An)("span",fe,(0,o.WA)(e.$t("gradebook.lastchange"))+" "+(0,o.WA)(t.worktime),1)):(0,n.g1)("",!0)]),(0,n.K2)(r.Ox,{name:"fade"},{default:(0,n.Ql)((()=>[(0,n.wt)((0,n.QD)("div",{class:"introtext",ref:"workbox",innerHTML:t.work},null,8,ve),[[r.Ub,e.show]])])),_:1})])):(0,n.g1)("",!0)}var ke={name:"GbShowwork",props:["work","worktime","showall"],data:function(){return{show:!1,rendered:!1}},computed:{btnLabel(){return this.$t(this.show?"gradebook.hidework":"gradebook.showwork")}},methods:{renderInit(){!this.rendered&&this.work&&(setTimeout(window.drawPics,100),window.rendermathnode(this.$refs.workbox),window.initlinkmarkup(this.$refs.workbox),window.$(this.$refs.workbox).find("img").on("click",window.rotateimg),this.rendered=!0)}},mounted(){this.renderInit()},watch:{work:function(e,s){null!==e&&(this.rendered=!1,this.$nextTick(this.renderInit))},showall:function(e,s){this.show=e}}};const Ae=(0,be.c)(ke,[["render",ye]]);var qe=Ae;function _e(e,s,t,r,o,a){const i=(0,n.E1)("gb-assess-list-item"),l=(0,n.E1)("menu-button");return(0,n.Wz)(),(0,n.An)("div",null,[(0,n.K2)(l,{id:"assess_select",options:a.navOptions,selected:t.selected,noarrow:1==a.navOptions.length,searchby:"ver"},{default:(0,n.Ql)((({option:e})=>[(0,n.K2)(i,{option:e,submitby:t.submitby},null,8,["option","submitby"])])),_:1},8,["options","selected","noarrow"])])}var We=t(7548);const De={key:0},xe={key:1};function Qe(e,s,t,r,a,i){return(0,n.Wz)(),(0,n.An)("span",null,[(0,n.QD)("strong",null,(0,o.WA)(i.attemptNum)+".",1),t.option.hasOwnProperty("score")&&"N/A"!==t.option.score?((0,n.Wz)(),(0,n.An)("span",De,[(0,n.mY)((0,o.WA)(e.$t("gradebook.score"))+": ",1),(0,n.QD)("strong",null,(0,o.WA)(i.score),1),(0,n.mY)(". ")])):(0,n.g1)("",!0),t.option.hasOwnProperty("status")?((0,n.Wz)(),(0,n.An)("span",xe,(0,o.WA)(i.verStatus),1)):(0,n.g1)("",!0)])}var $e={name:"GbAssessListItem",props:["option","submitby"],computed:{attemptNum(){return 3===this.option.status?this.$t("gradebook.practice_attempt"):"by_question"===this.submitby?this.$t("gradebook.scored_attempt"):this.$tc("gradebook.attempt_n",this.option.ver+1)},verStatus(){if(-1===this.option.status)return this.$t("gradebook.not_started");if(0===this.option.status&&"by_assessment"===this.submitby)return this.$t("gradebook.not_submitted");if(1===this.option.status||2===this.option.status){let e="";return"by_question"===this.submitby?e+=this.$t("gradebook.lastchange"):e+=this.$t("gradebook.submitted"),e+=" "+this.option.lastchange_disp,e}return""},score(){return this.option.score+"/"+le.assessInfo.points_possible}}};const Oe=(0,be.c)($e,[["render",Qe]]);var ze=Oe,Ie={name:"GbAssessSelect",props:["versions","selected","submitby","haspractice"],components:{MenuButton:We.c,GbAssessListItem:ze},computed:{navOptions(){var e=[];for(let s=0;s<this.versions.length;s++){const t={ver:s,status:this.versions[s].status,lastchange_disp:this.versions[s].lastchange_disp,onclick:()=>this.$emit("setversion",s)};this.versions[s].hasOwnProperty("score")&&(t.score=this.versions[s].score),e.push(t)}return e}},methods:{}};const Pe=(0,be.c)(Ie,[["render",_e]]);var Te=Pe;const Ee={style:{display:"inline-block"}};function Se(e,s,t,r,o,a){const i=(0,n.E1)("gb-question-list-item"),l=(0,n.E1)("menu-button");return(0,n.Wz)(),(0,n.An)("div",Ee,[(0,n.K2)(l,{id:"qselect"+t.qn,options:a.navOptions,selected:t.selected,noarrow:1==a.navOptions.length,searchby:"ver"},{default:(0,n.Ql)((({option:e})=>[(0,n.K2)(i,{option:e,total:a.navOptions.length},null,8,["option","total"])])),_:1},8,["id","options","selected","noarrow"])])}const Ce={key:0};function je(e,s,t,r,a,i){return(0,n.Wz)(),(0,n.An)("span",null,[(0,n.mY)((0,o.WA)(i.attemptNum)+". ",1),t.option.hasOwnProperty("score")&&"N/A"!==t.option.score?((0,n.Wz)(),(0,n.An)("span",Ce,[(0,n.mY)((0,o.WA)(e.$t("gradebook.score"))+": ",1),(0,n.QD)("strong",null,(0,o.WA)(i.score),1)])):(0,n.g1)("",!0)])}var Fe={name:"GbQuestionListItem",props:["option","total"],computed:{attemptNum(){return this.$tc("gradebook.version_n",this.option.ver+1)+(this.option.scored?"*":"")+"/"+this.total},score(){return this.option.score+"/"+this.option.ptsposs}}};const Me=(0,be.c)(Fe,[["render",je]]);var Ve=Me,Ge={name:"GbQuestionSelect",props:["versions","selected","qn"],components:{MenuButton:We.c,GbQuestionListItem:Ve},computed:{navOptions(){var e=[];for(let s=0;s<this.versions.length;s++){const t={ver:s,ptsposs:this.versions[s].points_possible,onclick:()=>this.$emit("setversion",this.qn,s)};this.versions[s].hasOwnProperty("score")&&(t.score=this.versions[s].score,t.scored=!0===this.versions[s].hasOwnProperty("scored")),e.push(t)}return e}}};const Ue=(0,be.c)(Ge,[["render",Se]]);var Le=Ue;const Ye={class:"scoredetails"},Ne={key:1},Be=["id","onUpdate:modelValue","onInput"],He={key:1},Ke=["onClick"],Re=["onClick","id"],Je={key:2},Ze={key:0},Xe={key:1},es={key:6},ss=["href"],ts={key:7},rs=["href"],ns=["href"];function os(e,s,t,a,i,l){const d=(0,n.E1)("icons"),c=(0,n.E1)("menu-button"),u=(0,n.E1)("gb-feedback"),h=(0,n.E1)("gb-all-tries"),p=(0,n.E1)("gb-penalties");return(0,n.Wz)(),(0,n.An)("div",Ye,[t.canedit?((0,n.Wz)(),(0,n.Az)(c,{key:0,class:"floatright",options:l.moreOptions,position:"right",nobutton:"true",noarrow:"true",id:"qmore"+t.qn},{button:(0,n.Ql)((()=>[(0,n.K2)(d,{name:"more",size:"medium"})])),_:1},8,["options","id"])):(0,n.g1)("",!0),t.canedit||t.qdata.hasOwnProperty("score")&&"N/A"!==t.qdata.score?((0,n.Wz)(),(0,n.An)("div",Ne,[(0,n.mY)((0,o.WA)(e.$t("gradebook.score"))+": ",1),((0,n.Wz)(!0),(0,n.An)(n.ae,null,(0,n.mi)(l.partPoss,((a,i)=>((0,n.Wz)(),(0,n.An)("span",{key:i},[t.canedit&&!l.isPractice?(0,n.wt)(((0,n.Wz)(),(0,n.An)("input",{key:0,type:"text",size:"4",id:"scorebox"+t.qn+(l.partPoss.length>1?"-"+i:""),pattern:"N\\/A|\\d*\\.?\\d*","onUpdate:modelValue":s=>e.curScores[i]=s,onInput:e=>l.updateScore(i,e),onKeyup:s[0]||(s[0]=(0,r.jj)((s=>e.$emit("submitform")),["enter"]))},null,40,Be)),[[r.Og,e.curScores[i]]]):((0,n.Wz)(),(0,n.An)("span",He,(0,o.WA)(e.curScores[i]),1)),(0,n.mY)("/"+(0,o.WA)(a)+" ",1),t.canedit&&!l.isPractice&&t.qdata.rubric>0?((0,n.Wz)(),(0,n.An)("button",{key:2,class:"plain nopad",onClick:e=>l.showRubric(i)},[(0,n.K2)(d,{name:"clipboard",alt:"icons.rubric",size:"small"})],8,Ke)):(0,n.g1)("",!0),t.canedit&&!l.isPractice&&t.qdata.rubric>0?((0,n.Wz)(),(0,n.An)("button",{key:3,style:{display:"none"},class:"plain nopad rubriclink",onClick:e=>l.showRubric(i),id:"rublink-scorebox"+t.qn+(l.partPoss.length>1?"-"+i:"")},[(0,n.K2)(d,{name:"clipboard",alt:"icons.rubric",size:"small"})],8,Re)):(0,n.g1)("",!0)])))),128)),t.canedit&&!l.isPractice?((0,n.Wz)(),(0,n.An)("button",{key:0,type:"button",onClick:s[1]||(s[1]=(...e)=>l.allFull&&l.allFull(...e)),class:"slim"},(0,o.WA)(l.fullCreditLabel),1)):(0,n.g1)("",!0),t.canedit&&l.hasManual&&!l.isPractice?((0,n.Wz)(),(0,n.An)("button",{key:1,type:"button",onClick:s[2]||(s[2]=(...e)=>l.manualFull&&l.manualFull(...e)),class:"slim"},(0,o.WA)(e.$t("gradebook.full_manual_parts")),1)):(0,n.g1)("",!0),t.canedit&&!l.isPractice&&!1===e.showfeedback?((0,n.Wz)(),(0,n.An)("button",{key:2,type:"button",class:"slim",onClick:s[3]||(s[3]=(...e)=>l.revealFeedback&&l.revealFeedback(...e))},(0,o.WA)(e.$t("gradebook.add_feedback")),1)):(0,n.g1)("",!0)])):(0,n.g1)("",!0),(0,n.K2)(u,{show:e.showfeedback,canedit:t.canedit,useeditor:l.useEditor,ref:"fbbox",qn:t.qn,value:t.qdata.feedback,onUpdate:l.updateFeedback},null,8,["show","canedit","useeditor","qn","value","onUpdate"]),t.showfull?((0,n.Wz)(),(0,n.An)("div",Je,[t.qdata.timeactive.total>0?((0,n.Wz)(),(0,n.An)("span",Ze,(0,o.WA)(e.$t("gradebook.time_on_version"))+": "+(0,o.WA)(l.timeSpent)+". ",1)):(0,n.g1)("",!0),t.qdata.lastchange?((0,n.Wz)(),(0,n.An)("span",Xe,(0,o.WA)(e.$t("gradebook.lastchange"))+" "+(0,o.WA)(t.qdata.lastchange)+". ",1)):(0,n.g1)("",!0),l.maxTry>1?((0,n.Wz)(),(0,n.An)("button",{key:2,type:"button",class:"slim",onClick:s[4]||(s[4]=s=>e.showAllTries=!e.showAllTries)},(0,o.WA)(e.$t("gradebook.show_tries")),1)):(0,n.g1)("",!0),l.hasPenalties?((0,n.Wz)(),(0,n.An)("button",{key:3,type:"button",class:"slim",onClick:s[5]||(s[5]=s=>e.showPenalties=!e.showPenalties)},(0,o.WA)(e.$t("gradebook.show_penalties")),1)):(0,n.g1)("",!0),l.hasAutoSaves?((0,n.Wz)(),(0,n.An)("button",{key:4,type:"button",class:"slim",onClick:s[6]||(s[6]=s=>e.showAutosaves=!e.showAutosaves)},(0,o.WA)(e.$t("gradebook.show_autosaves")),1)):(0,n.g1)("",!0)])):(0,n.g1)("",!0),e.showAllTries?((0,n.Wz)(),(0,n.Az)(h,{key:3,tries:t.qdata.other_tries,type:"tries",qn:t.qn},null,8,["tries","qn"])):(0,n.g1)("",!0),e.showPenalties?((0,n.Wz)(),(0,n.Az)(p,{key:4,parts:t.qdata.parts,submitby:l.submitby},null,8,["parts","submitby"])):(0,n.g1)("",!0),e.showAutosaves?((0,n.Wz)(),(0,n.Az)(h,{key:5,tries:t.qdata.autosaves,type:"autosave",submitby:l.submitby,qn:t.qn},null,8,["tries","submitby","qn"])):(0,n.g1)("",!0),t.showfull&&l.qHelps.length>0?((0,n.Wz)(),(0,n.An)("div",es,[(0,n.mY)((0,o.WA)(e.$t("gradebook.had_help"))+": ",1),((0,n.Wz)(!0),(0,n.An)(n.ae,null,(0,n.mi)(l.qHelps,((e,s)=>((0,n.Wz)(),(0,n.An)("a",{key:s,href:e.url,target:"_blank"},(0,o.WA)(e.title),9,ss)))),128))])):(0,n.g1)("",!0),t.qdata.category?((0,n.Wz)(),(0,n.An)("div",ts,(0,o.WA)(e.$t("qdetails.category"))+": "+(0,o.WA)(t.qdata.category),1)):(0,n.g1)("",!0),(0,n.QD)("div",null,[l.showMessage?((0,n.Wz)(),(0,n.An)("a",{key:0,href:l.messageHref,target:"help"},[(0,n.K2)(d,{name:"message"}),(0,n.mY)(" "+(0,o.WA)(e.$t("helps.message_instructor")),1)],8,rs)):(0,n.g1)("",!0),l.postToForum>0?((0,n.Wz)(),(0,n.An)("a",{key:1,href:l.forumHref,target:"help"},[(0,n.K2)(d,{name:"forum"}),(0,n.mY)(" "+(0,o.WA)(e.$t("helps.post_to_forum")),1)],8,ns)):(0,n.g1)("",!0)])])}const as={ref:"trywrap"},is={key:0},ls={key:1},ds={key:0,class:"subdued"},cs={key:0},us={key:1},hs={key:0},ps={key:0},bs=["innerHTML"];function gs(e,s,t,r,a,i){return(0,n.Wz)(),(0,n.An)("div",as,[(0,n.QD)("p",null,["tries"===t.type?((0,n.Wz)(),(0,n.An)("strong",is,(0,o.WA)(e.$t("gradebook.all_tries")),1)):"autosave"===t.type?((0,n.Wz)(),(0,n.An)("strong",ls,(0,o.WA)(e.$t("gradebook.autosaves")),1)):(0,n.g1)("",!0)]),"autosave"===t.type?((0,n.Wz)(),(0,n.An)("p",ds,[(0,n.mY)((0,o.WA)(e.$t("gradebook.autosave_info"))+" ",1),"by_assessment"==t.submitby?((0,n.Wz)(),(0,n.An)("span",cs,(0,o.WA)(e.$t("gradebook.autosave_byassess")),1)):((0,n.Wz)(),(0,n.An)("span",us))])):(0,n.g1)("",!0),((0,n.Wz)(!0),(0,n.An)(n.ae,null,(0,n.mi)(i.processedTries,((s,r)=>((0,n.Wz)(),(0,n.An)("div",{key:r,class:"med-below med-left"},[i.processedTries.length>1?((0,n.Wz)(),(0,n.An)("div",hs,[(0,n.QD)("strong",null,(0,o.WA)(e.$t("gradebook.part_n",{n:r+1})),1)])):(0,n.g1)("",!0),((0,n.Wz)(!0),(0,n.An)(n.ae,null,(0,n.mi)(s,((s,r)=>((0,n.Wz)(),(0,n.An)("div",{key:r},["tries"==t.type?((0,n.Wz)(),(0,n.An)("span",ps,(0,o.WA)(e.$t("gradebook.try_n",{n:r+1}))+": ",1)):(0,n.g1)("",!0),(0,n.QD)("span",{innerHTML:s},null,8,bs)])))),128))])))),128))],512)}t(468);var ms={name:"GbAllTries",props:["tries","qn","type","submitby"],data:function(){return{rendered:!1,drawToRender:[]}},computed:{processedTries(){const e=[];let s,t;for(s in this.tries){const r=[];for(t in this.tries[s])if("object"===typeof this.tries[s][t]&&"draw"===this.tries[s][t][0]){const e=this.qn+"-"+s+"-"+t,n=this.tries[s][t][2][6],o=this.tries[s][t][2][7];r[t]='<canvas id="canvasGBR'+e+'" width='+n+" height="+o+"></canvas>",r[t]+='<input type="hidden" id="qnGBR'+e+'"/>'}else r[t]=this.tries[s][t];e[s]=r}return e}},methods:{renderInit(){if(this.rendered)return;let e,s;for(e in setTimeout(window.drawPics,100),window.rendermathnode(this.$refs.trywrap),this.tries)for(s in this.tries[e])if("object"===typeof this.tries[e][s]&&"draw"===this.tries[e][s][0]){let t=this.tries[e][s][1].replace(/\(/g,"[").replace(/\)/g,"]").split(";;");""!==t[0]&&(t[0]="["+t[0].replace(/;/g,"],[")+"]"),t="[["+t.join("],[")+"]]";const r=this.qn+"-"+e+"-"+s,n=this.tries[e][s][2]||[];window.canvases["GBR"+r]=n.slice(),window.canvases["GBR"+r].unshift("GBR"+r),window.drawla["GBR"+r]=JSON.parse(t),window.imathasDraw.initCanvases("GBR"+r)}}},mounted(){this.renderInit()},watch:{tries:function(e,s){null!==e&&(this.rendered=!1,this.$nextTick(this.renderInit))}}};const ws=(0,be.c)(ms,[["render",gs]]);var fs=ws;const vs={class:"qdetails"},ys=(0,n.QD)("caption",{class:"sr-only"},"Penalties Applied",-1);function ks(e,s,t,r,a,i){const l=(0,n.E1)("penalties-applied");return(0,n.Wz)(),(0,n.An)("table",vs,[ys,(0,n.QD)("thead",null,[(0,n.QD)("tr",null,[(0,n.QD)("th",null,(0,o.WA)(e.$t("qdetails.part")),1),(0,n.QD)("th",null,(0,o.WA)(e.$t("penalties.applied")),1)])]),(0,n.QD)("tbody",null,[((0,n.Wz)(!0),(0,n.An)(n.ae,null,(0,n.mi)(t.parts,((e,s)=>((0,n.Wz)(),(0,n.An)("tr",{key:s},[(0,n.QD)("td",null,(0,o.WA)(s+1),1),(0,n.QD)("td",null,[-1!=i.partHasPenalties.indexOf(s)?((0,n.Wz)(),(0,n.Az)(l,{key:0,class:"med-left",part:e,submitby:t.submitby},null,8,["part","submitby"])):(0,n.g1)("",!0)])])))),128))])])}var As=t(7864),qs={name:"GbPenalties",props:["parts","submitby"],components:{PenaltiesApplied:As.c},computed:{partHasPenalties(){const e=[];for(let s=0;s<this.parts.length;s++)this.parts[s].hasOwnProperty("penalties")&&this.parts[s].penalties.length>0&&e.push(s);return e}}};const _s=(0,be.c)(qs,[["render",ks]]);var Ws=_s,Ds=t(1096);const xs=(0,n.QD)("br",null,null,-1),Qs=["id","value"],$s=["innerHTML"];function Os(e,s,t,a,i,l){const d=(0,n.E1)("tinymce-input");return(0,n.wt)(((0,n.Wz)(),(0,n.An)("div",null,[(0,n.mY)((0,o.WA)(t.username?e.$t("gradebook.feedback_for",{name:t.username}):e.$t("gradebook.feedback"))+":",1),xs,t.canedit&&!t.useeditor?((0,n.Wz)(),(0,n.An)("textarea",{key:0,class:"fbbox",id:"fb"+t.qn,ref:"fbbox",rows:"2",cols:"60",value:t.value,onInput:s[0]||(s[0]=(...e)=>l.updateFeedback&&l.updateFeedback(...e))},null,40,Qs)):t.canedit?((0,n.Wz)(),(0,n.Az)(d,{key:1,ref:"fbbox",id:"fb"+t.qn,value:t.value,onInput:l.updateFeedback},null,8,["id","value","onInput"])):((0,n.Wz)(),(0,n.An)("div",{key:2,class:"fbbox",ref:"fbbox",innerHTML:t.value},null,8,$s))],512)),[[r.Ub,t.show]])}const zs=["id","rows"];function Is(e,s,t,r,o,a){return(0,n.Wz)(),(0,n.An)("div",{id:a.computedId,ref:"inbox",class:"fbbox skipmathrender",rows:t.rows},null,8,zs)}var Ps={name:"TinymceInput",props:{id:{default:null},value:{default:""},rows:{default:2}},data:function(){return{objTinymce:null}},computed:{computedId:function(){return"editor"===this.id||""===this.id||null===this.id?"editor-"+this.guidGenerator():this.id}},mounted:function(){this.$refs.inbox.innerHTML=this.value,this.initEditor()},updated:function(){this.initEditor()},methods:{guidGenerator:function(){function e(){return Math.random().toString(36).substr(2,9)}return"ed-"+e()+"-"+e()},initEditor(){var e=this;window.initeditor("exact",this.computedId,null,!0,(function(s){s.on("input change keyup undo redo",(function(t){e.updateValue(s.getContent())})).on("blur",(function(s){e.$emit("blur",!0)})).on("focus",(function(s){e.$emit("focus",!0)})),e.objTinymce=s}))},updateValue:function(e){this.$emit("input",e)},focus:function(){this.objTinymce.focus()}},watch:{value:function(e,s){"string"!==typeof e&&(e=""),e!==this.objTinymce.getContent()&&this.objTinymce.setContent(e)}}};const Ts=(0,be.c)(Ps,[["render",Is]]);var Es=Ts,Ss={name:"GbFeedback",props:["show","canedit","useeditor","value","qn","username"],components:{TinymceInput:Es},data:function(){return{rendered:!1}},methods:{updateFeedback(e){let s;s=this.useeditor?e:e.target.value,this.$emit("update",s)},renderInit(){this.rendered||this.canedit||(setTimeout(window.drawPics,100),window.rendermathnode(this.$refs.fbbox))},focus(){this.$refs.fbbox.focus()}},mounted(){this.renderInit()},watch:{value:function(e,s){this.rendered=!1,this.$nextTick(this.renderInit)},show:function(e,s){this.$nextTick(this.$nextTick(window.sendLTIresizemsg))}}};const Cs=(0,be.c)(Ss,[["render",Os]]);var js=Cs,Fs={name:"GbScoreDetails",props:["qdata","qn","canedit","showfull"],components:{GbAllTries:fs,GbPenalties:Ws,MenuButton:We.c,Icons:Ds.c,GbFeedback:js},data:function(){return{curScores:[],showfeedback:!1,showAllTries:!1,showPenalties:!1,showAutosaves:!1}},computed:{answeights(){if(!this.qdata.answeights||this.qdata.singlescore)return[1];{const e=this.qdata.answeights.map((e=>parseFloat(e))),s=e.reduce(((e,s)=>e+s));return e.map((e=>e/s))}},partPoss(){var e=[];for(let s=0;s<this.answeights.length;s++)e[s]=Math.round(1e3*this.qdata.points_possible*this.answeights[s])/1e3;return e},fullCreditLabel(){return this.answeights.length>1?this.$t("gradebook.full_credit_parts"):this.$t("gradebook.full_credit")},timeSpent(){const e=Math.round(10*this.qdata.timeactive.total/60)/10+" "+this.$t("gradebook.minutes");return e},useEditor(){return"undefined"!==typeof window.tinyMCE},isPractice(){return le.ispractice},isLastVersion(){let e=le.assessInfo.assess_versions.length-1;return le.assessInfo.has_practice&&e--,le.curAver===e},maxTry(){let e=0;for(let s=0;s<this.qdata.parts.length;s++)this.qdata.parts[s]&&this.qdata.parts[s].try&&this.qdata.parts[s].try>e&&(e=this.qdata.parts[s].try);return e},questionEditUrl(){let e="id="+this.qdata.qsetid+"&cid="+le.cid;return e+="&aid="+le.aid+"&qid="+this.qdata.qid,le.APIbase+"../course/moddataset.php?"+e},questionErrorUrl(){if(le.assessInfo.qerror_cid){const e="0-"+this.qdata.qsetid+"-"+this.qdata.seed+"-reperr-"+le.assessInfo.ver,s="add=new&cid="+le.assessInfo.qerror_cid+"&quoteq="+e+"&to="+this.qdata.qowner+"&title=Problem%20with%20question%20id%20"+this.qdata.qsetid;return le.APIbase+"../msgs/msglist.php?"+s}return""},useInMsg(){const e=this.qn+"-"+this.qdata.qsetid+"-"+this.qdata.seed+"-"+le.aid+"-"+le.assessInfo.ver,s="add=new&cid="+le.cid+"&quoteq="+e+"&to="+le.uid;return le.APIbase+"../msgs/msglist.php?"+s},moreOptions(){const e=[{label:this.$t("gradebook.use_in_msg"),link:this.useInMsg},{label:this.$t("gradebook.view_edit")+" ID "+this.qdata.qsetid+" Seed "+this.qdata.seed,link:this.questionEditUrl},{label:le.assessInfo.hasOwnProperty("qerrortitle")?le.assessInfo.qerrortitle:this.$t("gradebook.msg_owner_question_bug"),link:this.questionErrorUrl}];return!this.isPractice&&this.isLastVersion&&e.push({label:this.$t("gradebook.clear_qwork"),onclick:()=>this.clearWork()}),e},hasPenalties(){for(let e=0;e<this.qdata.parts.length;e++)if(this.qdata.parts[e].hasOwnProperty("penalties")&&this.qdata.parts[e].penalties.length>0)return!0;return!1},hasManual(){if(1===this.qdata.parts.length)return!1;for(let e=0;e<this.qdata.parts.length;e++)if(this.qdata.parts[e].hasOwnProperty("req_manual")&&!0===this.qdata.parts[e].req_manual)return!0;return!1},hasAutoSaves(){return this.qdata.hasOwnProperty("autosaves")},submitby(){return le.assessInfo.submitby},qHelps(){if(this.qdata.jsparams){const e=this.qdata.jsparams.helps;for(const s in e)"video"===e[s].label?(e[s].icon="video",e[s].title=this.$t("helps.video")):"read"===e[s].label?(e[s].icon="file",e[s].title=this.$t("helps.read")):"ex"===e[s].label?(e[s].icon="file",e[s].title=this.$t("helps.written_example")):(e[s].icon="file",e[s].title=e[s].label);return e}return[]},showMessage(){return le.assessInfo.hasOwnProperty("help_features")&&!0===le.assessInfo.help_features.message&&!le.assessInfo.can_edit_scores},postToForum(){return le.assessInfo.hasOwnProperty("help_features")&&le.assessInfo.help_features.forum},quoteQ(){const e=this.qdata.questionsetid,s=this.qdata.seed,t=2;return this.qn+"-"+e+"-"+s+"-"+le.aid+"-"+t},messageHref(){let e=window.imasroot+"/msgs/msglist.php?";return e+=window.$.param({cid:le.cid,add:"new",quoteq:this.quoteQ,to:"instr"}),e},forumHref(){let e=window.imasroot+"/forums/thread.php?";return e+=window.$.param({cid:le.cid,forum:le.assessInfo.help_features.forum,modify:"new",quoteq:this.quoteQ}),e}},methods:{updateScore(e,s){if(""===this.curScores[e].trim())de.setScoreOverride(this.qn,e,"");else{const s=this.qdata.points_possible*this.answeights[e];de.setScoreOverride(this.qn,e,this.curScores[e]/s)}},revealFeedback(){this.showfeedback=!0,this.$nextTick((()=>this.$refs.fbbox.focus()))},updateFeedback(e){de.setFeedback(this.qn,e)},allFull(){for(let e=0;e<this.answeights.length;e++)this.curScores[e]=this.partPoss[e],de.setScoreOverride(this.qn,e,this.curScores[e]/this.partPoss[e])},manualFull(){for(let e=0;e<this.answeights.length;e++)this.qdata.parts[e]&&this.qdata.parts[e].hasOwnProperty("req_manual")&&!0===this.qdata.parts[e].req_manual&&(this.curScores[e]=this.partPoss[e],de.setScoreOverride(this.qn,e,this.curScores[e]/this.partPoss[e]))},clearWork(){le.clearAttempts.type="qver",le.clearAttempts.qn=this.qn,le.clearAttempts.show=!0},initCurScores(){var e=[];for(let s=0;s<this.answeights.length;s++)if(this.qdata.singlescore)e.push(this.qdata.score);else if(this.qdata.scoreoverride&&"object"!==typeof this.qdata.scoreoverride){let t=this.qdata.scoreoverride*this.answeights[s]*this.qdata.points_possible;t=Math.round(1e3*t)/1e3,e.push(t)}else this.qdata.scoreoverride&&this.qdata.scoreoverride.hasOwnProperty(s)?this.qdata.parts[s]&&this.qdata.parts[s].points_possible?e.push(Math.round(1e3*this.qdata.scoreoverride[s]*this.qdata.parts[s].points_possible)/1e3):e.push(Math.round(1e3*this.qdata.scoreoverride[s]*this.answeights[s]*this.qdata.points_possible)/1e3):0!==this.maxTry&&this.qdata.parts[s].hasOwnProperty("score")?e.push(this.qdata.parts[s].score):e.push("N/A");this.curScores=e,this.showfeedback=null!==this.qdata.feedback&&this.qdata.feedback.length>0},showRubric(e){window.imasrubrics||(window.imasrubrics=le.assessInfo.rubrics),this.showfeedback=!0,window.imasrubric_show(this.qdata.rubric,this.partPoss[e],"scorebox"+this.qn+(this.partPoss.length>1?"-"+e:""),"fb"+this.qn,this.qn+1+(this.partPoss.length>1?" part "+(e+1):""),600)}},mounted(){this.initCurScores()},watch:{qdata:{handler:function(e,s){this.initCurScores()},deep:!0}}};const Ms=(0,be.c)(Fs,[["render",os]]);var Vs=Ms;const Gs={key:0,class:"dialog-overlay",ref:"wrap"},Us=["aria-label"],Ls={key:0,class:"clearoptions"},Ys={key:0},Ns={key:1,class:"clearoptions"},Bs={key:0},Hs={key:2,class:"clearoptions"},Ks={key:0},Rs={key:1},Js={key:2},Zs={class:"noticetext"},Xs={class:"flexrow",style:{"justify-content":"space-between"}};function et(e,s,t,a,i,l){return l.showModal?((0,n.Wz)(),(0,n.An)("div",Gs,[(0,n.QD)("div",{class:"dialog pane-body",role:"alertdialog","aria-modal":"true","aria-label":e.$t("gradebook.clear_hdr"),"aria-describedby":"clearoptions",tabindex:"-1"},["all"===l.showType?((0,n.Wz)(),(0,n.An)("div",Ls,[(0,n.QD)("p",null,[(0,n.QD)("label",null,[(0,n.wt)((0,n.QD)("input",{type:"radio",value:"0","onUpdate:modelValue":s[0]||(s[0]=s=>e.type=s)},null,512),[[r.sz,e.type]]),(0,n.mY)(" "+(0,o.WA)(e.$t("gradebook.clear_completely_msg")),1)])]),l.isByQuestion?((0,n.Wz)(),(0,n.An)("p",Ys,[(0,n.QD)("label",null,[(0,n.wt)((0,n.QD)("input",{type:"radio",value:"1","onUpdate:modelValue":s[1]||(s[1]=s=>e.type=s)},null,512),[[r.sz,e.type]]),(0,n.mY)(" "+(0,o.WA)(e.$t("gradebook.clear_all_work_msg")),1)])])):(0,n.g1)("",!0)])):"attempt"===l.showType?((0,n.Wz)(),(0,n.An)("div",Ns,[(0,n.QD)("p",null,[(0,n.QD)("label",null,[(0,n.wt)((0,n.QD)("input",{type:"radio",value:"0","onUpdate:modelValue":s[2]||(s[2]=s=>e.type=s)},null,512),[[r.sz,e.type]]),(0,n.mY)(" "+(0,o.WA)(e.$t("gradebook.clear_attempt_regen_msg")),1)])]),l.isLastAttempt?((0,n.Wz)(),(0,n.An)("p",Bs,[(0,n.QD)("label",null,[(0,n.wt)((0,n.QD)("input",{type:"radio",value:"1","onUpdate:modelValue":s[3]||(s[3]=s=>e.type=s)},null,512),[[r.sz,e.type]]),(0,n.mY)(" "+(0,o.WA)(e.$t("gradebook.clear_attempt_msg")),1)])])):(0,n.g1)("",!0)])):"qver"===l.showType?((0,n.Wz)(),(0,n.An)("div",Hs,[l.isByQuestion?((0,n.Wz)(),(0,n.An)("p",Ks,[(0,n.QD)("label",null,[(0,n.wt)((0,n.QD)("input",{type:"radio",value:"0","onUpdate:modelValue":s[4]||(s[4]=s=>e.type=s)},null,512),[[r.sz,e.type]]),(0,n.mY)(" "+(0,o.WA)(e.$t("gradebook.clear_qver_regen_msg")),1)])])):((0,n.Wz)(),(0,n.An)("p",Rs,[(0,n.QD)("label",null,[(0,n.wt)((0,n.QD)("input",{type:"radio",value:"0","onUpdate:modelValue":s[5]||(s[5]=s=>e.type=s)},null,512),[[r.sz,e.type]]),(0,n.mY)(" "+(0,o.WA)(e.$t("gradebook.clear_qver_regen_msg2")),1)])])),l.isLastQAttempt?((0,n.Wz)(),(0,n.An)("p",Js,[(0,n.QD)("label",null,[(0,n.wt)((0,n.QD)("input",{type:"radio",value:"1","onUpdate:modelValue":s[6]||(s[6]=s=>e.type=s)},null,512),[[r.sz,e.type]]),(0,n.mY)(" "+(0,o.WA)(e.$t("gradebook.clear_qver_msg")),1)])])):(0,n.g1)("",!0)])):(0,n.g1)("",!0),(0,n.QD)("p",Zs,(0,o.WA)(e.$t("gradebook.clear_warning")),1),(0,n.QD)("div",Xs,[(0,n.QD)("button",{class:"primary",onClick:s[7]||(s[7]=(...e)=>l.close&&l.close(...e))}," Cancel "),(0,n.QD)("button",{class:"secondary",onClick:s[8]||(s[8]=(...e)=>l.doAction&&l.doAction(...e))}," Continue ")])],8,Us)],512)):(0,n.g1)("",!0)}var st=t(2408),tt=t.n(st),rt={name:"GbClearAttempts",data:function(){return{type:0,dialog:null}},computed:{showModal(){return le.clearAttempts.show},showType(){return le.clearAttempts.type},isByQuestion(){return"by_question"===le.assessInfo.submitby},isLastAttempt(){let e=le.assessInfo.assess_versions.length-1;return le.assessInfo.has_practice&&e--,le.curAver===e},isLastQAttempt(){const e=le.assessInfo.assess_versions[le.curAver].questions[le.clearAttempts.qn].length-1;return le.curQver[le.clearAttempts.qn]===e}},methods:{close(){le.clearAttempts.show=!1,window.$(document).off("keyup.dialog"),this.dialog.destroy()},doAction(){de.clearAttempt(this.type)}},updated(){le.clearAttempts.show&&(window.$(document).on("keyup.dialog",(e=>{"Escape"===e.key&&this.close()})),this.dialog=new(tt())(this.$refs.wrap),this.dialog.show())}};const nt=(0,be.c)(rt,[["render",et]]);var ot=nt,at=t(9088),it=t(5424),lt=t(6248),dt=t(3749),ct=t(8616),ut={components:{GbQuestion:me,GbShowwork:qe,GbAssessSelect:Te,GbQuestionSelect:Le,GbScoreDetails:Vs,GbClearAttempts:ot,SummaryCategories:at.c,ErrorDialog:it.c,GbFeedback:js,ConfirmDialog:lt.c,InterQuestionTextList:dt.c,InterQuestionText:ct.c},data:function(){return{showOverride:!1,assessOverride:"",hide100:!1,hidePerfect:!1,hideNonzero:!1,hideZero:!1,hideUnanswered:!1,hideFeedback:!1,hideNowork:!1,showFilters:!1,showEndmsg:!1,showExcused:!1,showAllWork:!1,hidetexts:!0}},computed:{assessInfoLoaded(){return null!==le.assessInfo},aData(){return le.assessInfo},viewFull(){return this.aData.viewfull},canEdit(){return le.assessInfo.can_edit_scores&&this.viewFull},canSubmit(){return!le.inTransit},useEditor(){return"undefined"!==typeof window.tinyMCE},isByQuestion(){return"by_question"===this.aData.submitby},startedString(){return 0===this.aData.starttime?this.$t("gradebook.not_started"):this.aData.starttime_disp},lastchangeString(){return 0===this.aData.lastchange?this.$t("gradebook.not_submitted"):this.aData.lastchange_disp},totalTimeOnTask(){return Math.round(10*this.aData.timeontask/60)/10+" "+this.$t("gradebook.minutes")},attemptCount(){let e=0;for(let s=0;s<this.aData.assess_versions.length;s++)this.aData.assess_versions[s].status<3&&e++;return e},extensionString(){return"latepass"===this.aData.extended_with.type?this.$tc("setlist.latepass_used",this.aData.extended_with.n):this.$t("setlist.extension")},curQuestions(){return this.aData.assess_versions[le.curAver].questions},curAver(){return le.curAver},curQver(){return le.curQver},curQuestionVers(){const e=[];for(let s=0;s<this.curQuestions.length;s++)e[s]=this.curQuestions[s][this.curQver[s]];return e},curEndmsg(){return this.aData.assess_versions[le.curAver].endmsg||""},showCategories(){let e=!1;for(const t in this.curQuestionVers)if(this.curQuestionVers[t].hasOwnProperty("category")&&""!==this.curQuestionVers[t].category&&null!==this.curQuestionVers[t].category){e=!0;break}const s=this.curQuestionVers[0].hasOwnProperty("score")&&!isNaN(Number(this.curQuestionVers[0].score));return e&&s},scoreCalc(){if("by_question"===this.aData.submitby)return this.$t("gradebook.best_on_question");if("best"===this.aData.keepscore){let e=this.$t("gradebook.keep_best");return"number"===typeof this.aData.gbscore&&(e+=" ("+this.$tc("gradebook.attempt_n",this.aData.scored_version+1)+")"),e}return"average"===this.aData.keepscore?this.$t("gradebook.keep_avg"):"last"===this.aData.keepscore?this.$t("gradebook.keep_last"):""},showViewAsStu(){return this.aData.has_active_attempt||0===this.aData.scored_version&&-1===this.aData.assess_versions[0].status},viewAsStuUrl(){return"index.php?cid="+le.cid+"&aid="+le.aid+"&uid="+le.uid},showQuestion(){const e={};for(let s=0;s<this.curQuestions.length;s++){const t=this.curQuestions[s][this.curQver[s]];let r=!0;this.hide100&&Math.abs(t.score-t.points_possible)<.002||this.hidePerfect&&Math.abs(t.rawscore-1)<.002||this.hideUnanswered&&0===t.parts.reduce(((e,s)=>Math.max(e,s.try)),0)||this.hideZero&&Math.abs(t.rawscore)<.002||this.hideNonzero&&Math.abs(t.rawscore)>.002&&Math.abs(t.rawscore)<.998||this.hideFeedback&&null!==t.feedback&&""!==t.feedback?r=!1:!this.hideNowork||t.hasOwnProperty("work")&&null!==t.work&&""!==t.work||(r=!1),e[s]=r}return e},exceptionActionLabel(){return this.aData.hasexception?this.$t("gradebook.edit_exception"):this.$t("gradebook.make_exception")},assessFeedback(){return this.aData.assess_versions[le.curAver].feedback||""},savedMsg(){return""===le.saving?"":this.$t("gradebook."+le.saving)},latepassBlockMsg(){var e;switch(this.aData.latepass_status){case 7:e="practice";break;case 8:e="gb";break;case 2:e="lpcutoff";break;case 3:e="courseend";break;case 4:e="pastdue";break;case 5:e="toolate";break;case 6:e="toofew";break}return this.$t("gradebook.latepass_blocked_"+e)},isUnsubmitted(){return"by_assessment"===this.aData.submitby&&0===this.aData.assess_versions[le.curAver].status},hasError(){return null!==le.errorMsg},errorMsg(){return le.errorMsg},confirmObj(){return le.confirmObj},lastQ(){return this.aData.assess_versions[le.curAver].questions.length-1},textList(){return le.assessInfo.hasOwnProperty("interquestion_text")?le.assessInfo.interquestion_text:[]}},methods:{changeAssessVersion(e){e!==le.curAver&&(Object.keys(le.scoreOverrides).length>0||Object.keys(le.feedbacks).length>0?le.confirmObj={body:"gradebook.unsaved_warn",action:()=>this.doChangeAssessVersion(e)}:this.doChangeAssessVersion(e))},doChangeAssessVersion(e){e!==le.curAver&&(this.hidetexts=!0,3===this.aData.assess_versions[e].status?de.loadGbAssessVersion(0,!0):de.loadGbAssessVersion(e,!1))},changeQuestionVersion(e,s){if(s===le.curQver[e])return;let t=!1;const r=new RegExp("^"+le.curAver+"-"+e+"-");for(const n in le.scoreOverrides)r.test(n)&&(t=!0);for(const n in le.feedbacks)r.test(n)&&(t=!0);t?le.confirmObj={body:"gradebook.unsaved_warn",action:()=>de.loadGbQuestionVersion(e,s)}:de.loadGbQuestionVersion(e,s)},updateFeedback(e){de.setFeedback(null,e)},setScoreOverride(e){const s=e.target.value.trim();s!==this.aData.scoreoverride&&(le.scoreOverrides.gen=s,this.assessOverride=""),le.saving=""},submitChanges(e,s){!this.aData.hasOwnProperty("scoreoverride")&&this.showOverride&&(""!==this.assessOverride&&(le.scoreOverrides.gen=this.assessOverride),this.showOverride=!1);var t=!0===e,r=!0===s;de.saveChanges(t,r)},submitForm(){this.submitChanges(!0)},exit(){window.location=window.exiturl},clearAttempts(e){le.clearAttempts.type=e,le.clearAttempts.show=!0},clearLPblock(){de.clearLPblock()},submitVersion(){de.endAssess()},redeemLatePass(){window.location=this.APIbase+"../course/redeemlatepass.php?cid="+le.cid+"&aid="+le.aid},makeException(){let e=le.APIbase+"../course/exception.php";e+="?cid="+le.cid+"&aid="+le.aid+"&uid="+le.uid,e+="&from=gb",window.location=e},showAllAns(){window.$("span[id^=ans]").toggleClass("hidden",!1).show(),window.$(".sabtn").replaceWith("<span>Answer: </span>"),window.$(".keybtn").attr("aria-expanded","true"),window.$("div[id^=dsbox]").toggleClass("hidden",!1).attr("aria-hidden",!1).attr("aria-expanded",!0),window.$("input[aria-controls^=dsbox]").attr("aria-expanded",!0)},beforeUnload(e){if(Object.keys(le.scoreOverrides).length>0||Object.keys(le.feedbacks).length>0)return e.preventDefault(),e.returnValue="You have unsaved changes","You have unsaved changes"},clearError(){le.errorMsg=null},closeConfirm(){le.confirmObj=null},previewFiles(){window.previewallfiles()},toggleFloatingScoreboxes(){window.toggleScrollingScoreboxes()},loadTexts(){le.assessInfo.hasOwnProperty("intro")||de.loadGbTexts()}},created(){window.$(window).on("beforeunload",this.beforeUnload),"undefined"!==typeof window.APIbase?le.APIbase=window.APIbase:le.APIbase="vue/";const e=window.location.search.replace(/^.*cid=(\d+).*$/,"$1"),s=window.location.search.replace(/^.*aid=(\d+).*$/,"$1"),t=window.location.search.replace(/^.*uid=(\d+).*$/,"$1"),r=window.location.search.replace(/^.*stu=(\d+).*$/,"$1");null!==le.assessInfo&&le.cid===e&&le.aid===s&&le.uid===t||(le.cid=e,window.cid=e,le.aid=s,le.uid=t,le.stu=r,le.queryString="?cid="+le.cid+"&aid="+le.aid+"&uid="+le.uid,de.loadGbAssessData())},updated(){this.$nextTick(window.sendLTIresizemsg)}};const ht=(0,be.c)(ut,[["render",oe]]);var pt=ht,bt=t(2608);(0,r.W0)(pt).use(bt._).mount("#app")}},s={};function t(r){var n=s[r];if(void 0!==n)return n.exports;var o=s[r]={exports:{}};return e[r].call(o.exports,o,o.exports,t),o.exports}t.m=e,function(){var e=[];t.O=function(s,r,n,o){if(!r){var a=1/0;for(c=0;c<e.length;c++){r=e[c][0],n=e[c][1],o=e[c][2];for(var i=!0,l=0;l<r.length;l++)(!1&o||a>=o)&&Object.keys(t.O).every((function(e){return t.O[e](r[l])}))?r.splice(l--,1):(i=!1,o<a&&(a=o));if(i){e.splice(c--,1);var d=n();void 0!==d&&(s=d)}}return s}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[r,n,o]}}(),function(){t.n=function(e){var s=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(s,{a:s}),s}}(),function(){var e,s=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};t.t=function(r,n){if(1&n&&(r=this(r)),8&n)return r;if("object"===typeof r&&r){if(4&n&&r.__esModule)return r;if(16&n&&"function"===typeof r.then)return r}var o=Object.create(null);t.r(o);var a={};e=e||[null,s({}),s([]),s(s)];for(var i=2&n&&r;"object"==typeof i&&!~e.indexOf(i);i=s(i))Object.getOwnPropertyNames(i).forEach((function(e){a[e]=function(){return r[e]}}));return a["default"]=function(){return r},t.d(o,a),o}}(),function(){t.d=function(e,s){for(var r in s)t.o(s,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:s[r]})}}(),function(){t.f={},t.e=function(e){return Promise.all(Object.keys(t.f).reduce((function(s,r){return t.f[r](e,s),s}),[]))}}(),function(){t.u=function(e){return"js/lang-de-json.js?v=f3dcdc1420a2bcb6"}}(),function(){t.miniCssF=function(e){}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,s){return Object.prototype.hasOwnProperty.call(e,s)}}(),function(){var e={},s="imathas-assess2:";t.l=function(r,n,o,a){if(e[r])e[r].push(n);else{var i,l;if(void 0!==o)for(var d=document.getElementsByTagName("script"),c=0;c<d.length;c++){var u=d[c];if(u.getAttribute("src")==r||u.getAttribute("data-webpack")==s+o){i=u;break}}i||(l=!0,i=document.createElement("script"),i.charset="utf-8",i.timeout=120,t.nc&&i.setAttribute("nonce",t.nc),i.setAttribute("data-webpack",s+o),i.src=r),e[r]=[n];var h=function(s,t){i.onerror=i.onload=null,clearTimeout(p);var n=e[r];if(delete e[r],i.parentNode&&i.parentNode.removeChild(i),n&&n.forEach((function(e){return e(t)})),s)return s(t)},p=setTimeout(h.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=h.bind(null,i.onerror),i.onload=h.bind(null,i.onload),l&&document.head.appendChild(i)}}}(),function(){t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){t.j=452}(),function(){t.p="vue/"}(),function(){var e={452:0};t.f.j=function(s,r){var n=t.o(e,s)?e[s]:void 0;if(0!==n)if(n)r.push(n[2]);else{var o=new Promise((function(t,r){n=e[s]=[t,r]}));r.push(n[2]=o);var a=t.p+t.u(s),i=new Error,l=function(r){if(t.o(e,s)&&(n=e[s],0!==n&&(e[s]=void 0),n)){var o=r&&("load"===r.type?"missing":r.type),a=r&&r.target&&r.target.src;i.message="Loading chunk "+s+" failed.\n("+o+": "+a+")",i.name="ChunkLoadError",i.type=o,i.request=a,n[1](i)}};t.l(a,l,"chunk-"+s,s)}},t.O.j=function(s){return 0===e[s]};var s=function(s,r){var n,o,a=r[0],i=r[1],l=r[2],d=0;if(a.some((function(s){return 0!==e[s]}))){for(n in i)t.o(i,n)&&(t.m[n]=i[n]);if(l)var c=l(t)}for(s&&s(r);d<a.length;d++)o=a[d],t.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return t.O(c)},r=self["webpackChunkimathas_assess2"]=self["webpackChunkimathas_assess2"]||[];r.forEach(s.bind(null,0)),r.push=s.bind(null,r.push.bind(r))}();var r=t.O(void 0,[999,640],(function(){return t(9528)}));r=t.O(r)})();
//# sourceMappingURL=gbviewassess.js.map